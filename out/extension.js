"use strict";var ha=Object.create;var ze=Object.defineProperty;var pa=Object.getOwnPropertyDescriptor;var ya=Object.getOwnPropertyNames;var ga=Object.getPrototypeOf,va=Object.prototype.hasOwnProperty;var d=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),ma=(t,e)=>{for(var r in e)ze(t,r,{get:e[r],enumerable:!0})},Hr=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of ya(e))!va.call(t,i)&&i!==r&&ze(t,i,{get:()=>e[i],enumerable:!(n=pa(e,i))||n.enumerable});return t};var P=(t,e,r)=>(r=t!=null?ha(ga(t)):{},Hr(e||!t||!t.__esModule?ze(r,"default",{value:t,enumerable:!0}):r,t)),_a=t=>Hr(ze({},"__esModule",{value:!0}),t);var Yr=d((Bf,Sa)=>{Sa.exports={name:"vsls",displayName:"VS Live Share extension API",description:"Enables VS Code extensions to access Live Share capabilities.",version:"1.0.4753",publisher:"ms-vsliveshare",main:"vscode.js",preview:!0,license:"SEE LICENSE IN LICENSE.txt",homepage:"https://aka.ms/vsls",bugs:{url:"https://aka.ms/vsls-issues",email:"vsls-feedback@microsoft.com"},author:{name:"Microsoft"},keywords:["Live Share"],categories:["Other"],repository:{url:"https://github.com/MicrosoftDocs/live-share"},dependencies:{"@microsoft/servicehub-framework":"^2.6.74"}}});var zr=d(A=>{"use strict";Object.defineProperty(A,"__esModule",{value:!0});var Ea=require("vscode"),Vr=Yr().version;A.extensionId="ms-vsliveshare.vsliveshare";async function Xr(t){let e=Ea.extensions.getExtension(A.extensionId);if(!e)return null;let r=e.isActive?e.exports:await e.activate();return r?r.getApi?r.getApi(Vr,t):r.getApiAsync(Vr):null}A.getApi=Xr;function xa(){return Xr()}A.getApiAsync=xa;var ba;(function(t){t.AllowGuestDebugControl="allowGuestDebugControl",t.AllowGuestTaskControl="allowGuestTaskControl",t.AutoShareServers="autoShareServers",t.AnonymousGuestApproval="anonymousGuestApproval",t.ConnectionMode="connectionMode",t.AllowedDomains="allowedDomains",t.AllowReadWriteTerminals="allowReadWriteTerminals"})(ba=A.PolicySetting||(A.PolicySetting={}));var wa;(function(t){t[t.None=0]="None",t[t.Host=1]="Host",t[t.Guest=2]="Guest"})(wa=A.Role||(A.Role={}));var Oa;(function(t){t[t.None=0]="None",t[t.ReadOnly=1]="ReadOnly",t[t.ReadWrite=3]="ReadWrite",t[t.Owner=255]="Owner"})(Oa=A.Access||(A.Access={}));var Aa;(function(t){t.Session="liveshare.session",t.ExplorerSession="liveshare.session.explorer",t.PlannedSessions="liveshare.plannedSessions",t.Contacts="liveshare.contacts",t.Help="liveshare.help"})(Aa=A.View||(A.View={}));var Ta;(function(t){t.Participants="participants",t.Servers="servers",t.Terminals="terminals",t.Comments="comments",t.Chat="chat",t.CurrentUser="participants.currentuser",t.Guest="participants.guest",t.FollowedGuest="participants.guest.followed",t.Participant="participants.participant",t.FollowedParticipant="participants.participant.followed",t.GuestAnonymous="participants.guest.anonymous",t.FollowedGuestAnonymous="participants.guest.followed.anonymous",t.GuestElevated="participants.guest.elevated",t.FollowedGuestElevated="participants.guest.followed.elevated",t.GuestElevatedAnonymous="participants.guest.elevated.anonymous",t.FollowedGuestElevatedAnonymous="participants.guest.followed.elevated.anonymous",t.LocalServer="servers.local",t.RemoteServer="servers.remote",t.LocalTerminalReadOnly="terminals.local.readonly",t.LocalTerminalReadWrite="terminals.local.readwrite",t.RemoteTerminal="terminals.remote",t.SuggestedContacts="contacts.suggested",t.AvailableContacts="contacts.available",t.ContactsProvider="contacts.provider",t.SelfContact="contacts.selfContact",t.Contact="contacts.contact",t.ContactInvited="contacts.contact.invited",t.ContactOffline="contacts.contact.offline",t.RecentContact="contacts.recentContact",t.RecentContactOffline="contacts.recentContact.offline",t.RecentContactInvited="contacts.recentContact.invited",t.NoContact="contacts.noContact",t.RecentContacts="contacts.RecentContacts",t.NoSuggestedContacts="contacts.NoSuggestedUsers",t.NoRecentContacts="contacts.NoRecentContacts",t.InvitedContact="contacts.invited",t.SessionFeedbackQuestion="help.sessionFeedback",t.ReportAProblem="help.reportAProblem",t.TweetUsYourFeedback="help.tweetUsYourFeedback",t.Survey="help.survey",t.GoodFeedback="help.goodFeedback",t.BadFeedback="help.badFeedback",t.DontAskAgain="help.dontAskAgain",t.Thankyou="help.thankyou",t.MoreInfo="help.moreinfo",t.ConfigureSettings="help.configureSettings",t.Loading="loading",t.Other="other"})(Ta=A.ViewItem||(A.ViewItem={}));var ie=class{};A.ActivityType=ie;ie.session="session";ie.workspace="workspace";ie.debug="debug";ie.terminal="terminal"});var Ke=d((Ff,Zr)=>{"use strict";var Kr=/[A-Z]/g;Zr.exports=function(t,e){return t=t.replace(Kr,Qr),e=e.replace(Kr,Qr),t===e};function Qr(t){return t.toLowerCase()}});var Mt=d((qf,Ae)=>{"use strict";Ae.exports=Pa;Ae.exports.from=Jr;Ae.exports.depth=Ca;Ae.exports.fromDepth=en;function Pa(t){if(!Array.isArray(t))throw new TypeError("Expected value to be an array");return Jr(t)}function Jr(t){return tn(t,[])}function Ca(t,e){if(!Array.isArray(t))throw new TypeError("Expected value to be an array");return en(t,e)}function en(t,e){if(typeof e!="number")throw new TypeError("Expected the depth to be a number");return rn(t,[],e)}function tn(t,e){for(var r=0;r<t.length;r++){var n=t[r];Array.isArray(n)?tn(n,e):e.push(n)}return e}function rn(t,e,r){r--;for(var n=0;n<t.length;n++){var i=t[n];r>-1&&Array.isArray(i)?rn(i,e,r):e.push(i)}return e}});var $t=d(Q=>{var Ia=function(t){return"_"+t},Ra=function(t){return t};Q.stringify=function(t){return typeof t=="object"&&t&&t.name?Q.stringify(t.name,t.protocol,t.subtypes):Array.prototype.concat.apply([],arguments).filter(Ra).map(Ia).join(".")};Q.parse=function(t){for(var e=t.split("."),r=0;r<e.length;r++)e[r][0]==="_"&&(e[r]=e[r].slice(1));return{name:e.shift(),protocol:e.shift()||null,subtypes:e}};Q.tcp=function(t){return Q.stringify(t,"tcp",Array.prototype.concat.apply([],Array.prototype.slice.call(arguments,1)))};Q.udp=function(t){return Q.stringify(t,"udp",Array.prototype.concat.apply([],Array.prototype.slice.call(arguments,1)))}});var sn=d(($f,nn)=>{nn.exports=function(e,r,n,i){if(!Buffer.isBuffer(e))throw TypeError("buffer is not a buffer");if(i===void 0&&typeof n=="string"&&(i=n,n=void 0),typeof r=="string")r=new Buffer(r,i||"utf8");else if(typeof r=="number"&&!isNaN(r))r=new Buffer([r]);else if(!Buffer.isBuffer(r))throw TypeError("search is not a bufferable object");if(r.length===0)return-1;if(n===void 0||typeof n=="number"&&isNaN(n))n=0;else if(typeof n!="number")throw TypeError("offset is not a number");n<0&&(n=e.length+n),n<0&&(n=0);for(var s=0,o=-1,a=n;a<e.length&&(e[a]!=r[s]&&(o=-1,a-=s-1,s=0),!(e[a]==r[s]&&(o==-1&&(o=a),++s,s==r.length)));++a);return o>-1&&e.length-o<r.length?-1:o}});var Wt=d((jf,on)=>{"use strict";var La=sn(),Na=new Buffer("=");on.exports=function(t){var e=t?t.binary:!1,r={};return r.encode=function(n,i,s){n||(n={}),s||(s=0),i||(i=new Buffer(r.encodingLength(n)+s));var o=s,a=Object.keys(n);return a.length===0&&(i[s]=0,s++),a.forEach(function(l){var c=n[l],f=s;if(s++,c===!0)s+=i.write(l,s);else if(Buffer.isBuffer(c)){s+=i.write(l+"=",s);var u=c.length;c.copy(i,s,0,u),s+=u}else s+=i.write(l+"="+c,s);i[f]=s-f-1}),r.encode.bytes=s-o,i},r.decode=function(n,i,s){i||(i=0),Number.isFinite(s)||(s=n.length);for(var o={},a=i;i<s;){var l=jt(n,i),c=La(l,Na);if(i+=jt.bytes,l.length!==0)if(c===-1)o[l.toString().toLowerCase()]=!0;else{if(c===0)continue;var f=l.slice(0,c).toString().toLowerCase();if(f in o)continue;o[f]=e?l.slice(c+1):l.slice(c+1).toString()}}return r.decode.bytes=i-a,o},r.encodingLength=function(n){if(!n)return 1;var i=Object.keys(n);return i.length===0?1:i.reduce(function(s,o){var a=n[o];return s+=Buffer.byteLength(o)+1,Buffer.isBuffer(a)?s+=a.length+1:a!==!0&&(s+=Buffer.byteLength(String(a))+1),s},0)},r};function jt(t,e){var r=t[e],n=e+1+r,i=t.slice(e+1,n>t.length?t.length:n);return jt.bytes=r+1,i}});var ln=d((Wf,un)=>{"use strict";var an=require("os"),ka=require("util"),Ua=require("events").EventEmitter,Ba=$t(),Da=Wt()(),cn=".local";un.exports=Gt;ka.inherits(Gt,Ua);function Gt(t){if(!t.name)throw new Error("Required name not given");if(!t.type)throw new Error("Required type not given");if(!t.port)throw new Error("Required port not given");this.name=t.name,this.protocol=t.protocol||"tcp",this.type=Ba.stringify(t.type,this.protocol),this.host=t.host||an.hostname(),this.port=t.port,this.fqdn=this.name+"."+this.type+cn,this.subtypes=t.subtypes||null,this.txt=t.txt||null,this.published=!1,this._activated=!1}Gt.prototype._records=function(){var t=[Fa(this),qa(this),Ma(this)],e=this,r=an.networkInterfaces();return Object.keys(r).forEach(function(n){r[n].forEach(function(i){i.internal||(i.family==="IPv4"?t.push($a(e,i.address)):t.push(ja(e,i.address)))})}),t};function Fa(t){return{name:t.type+cn,type:"PTR",ttl:28800,data:t.fqdn}}function qa(t){return{name:t.fqdn,type:"SRV",ttl:120,data:{port:t.port,target:t.host}}}function Ma(t){return{name:t.fqdn,type:"TXT",ttl:4500,data:Da.encode(t.txt)}}function $a(t,e){return{name:t.host,type:"A",ttl:120,data:e}}function ja(t,e){return{name:t.host,type:"AAAA",ttl:120,data:e}}});var pn=d((Gf,hn)=>{"use strict";var Wa=Ke(),Ga=Mt(),Ha=ln(),Ya=60*60*1e3,Va=3;hn.exports=Qe;function Qe(t){this._server=t,this._services=[]}Qe.prototype.publish=function(t){var e=new Ha(t);return e.start=Xa.bind(e,this),e.stop=za.bind(e,this),e.start({probe:t.probe!==!1}),e};Qe.prototype.unpublishAll=function(t){dn(this._server,this._services,t),this._services=[]};Qe.prototype.destroy=function(){this._services.forEach(function(t){t._destroyed=!0})};function Xa(t,e){if(!this._activated)if(this._activated=!0,t._services.push(this),e.probe){var r=this;Ka(t._server.mdns,this,function(n){if(n){r.stop(),r.emit("error",new Error("Service name is already in use on the network"));return}fn(t._server,r)})}else fn(t._server,this)}function za(t,e){if(this._activated){dn(t._server,this,e);var r=t._services.indexOf(this);r!==-1&&t._services.splice(r,1)}}function Ka(t,e,r){var n=!1,i=0,s;t.on("response",a),setTimeout(o,Math.random()*250);function o(){!e._activated||e._destroyed||t.query(e.fqdn,"ANY",function(){n=!0,s=setTimeout(++i<3?o:c,250),s.unref()})}function a(f){n&&(f.answers.some(l)||f.additionals.some(l))&&c(!0)}function l(f){return Wa(f.name,e.fqdn)}function c(f){t.removeListener("response",a),clearTimeout(s),r(!!f)}}function fn(t,e){var r=1e3,n=e._records();t.register(n),function i(){!e._activated||e._destroyed||t.mdns.respond(n,function(){e.published||(e._activated=!0,e.published=!0,e.emit("up")),r=r*Va,r<Ya&&!e._destroyed&&setTimeout(i,r).unref()})}()}function dn(t,e,r){Array.isArray(e)||(e=[e]),e=e.filter(function(i){return i._activated});var n=Ga.depth(e.map(function(i){i._activated=!1;var s=i._records();return s.forEach(function(o){o.ttl=0}),s}),1);if(n.length===0)return r&&r();t.unregister(n),t.mdns.respond(n,function(){e.forEach(function(i){i.published=!1}),r&&r.apply(null,arguments)})}});var yn=d(Ht=>{Ht.toString=function(t){switch(t){case 1:return"A";case 10:return"NULL";case 28:return"AAAA";case 18:return"AFSDB";case 42:return"APL";case 257:return"CAA";case 60:return"CDNSKEY";case 59:return"CDS";case 37:return"CERT";case 5:return"CNAME";case 49:return"DHCID";case 32769:return"DLV";case 39:return"DNAME";case 48:return"DNSKEY";case 43:return"DS";case 55:return"HIP";case 13:return"HINFO";case 45:return"IPSECKEY";case 25:return"KEY";case 36:return"KX";case 29:return"LOC";case 15:return"MX";case 35:return"NAPTR";case 2:return"NS";case 47:return"NSEC";case 50:return"NSEC3";case 51:return"NSEC3PARAM";case 12:return"PTR";case 46:return"RRSIG";case 17:return"RP";case 24:return"SIG";case 6:return"SOA";case 99:return"SPF";case 33:return"SRV";case 44:return"SSHFP";case 32768:return"TA";case 249:return"TKEY";case 52:return"TLSA";case 250:return"TSIG";case 16:return"TXT";case 252:return"AXFR";case 251:return"IXFR";case 41:return"OPT";case 255:return"ANY"}return"UNKNOWN_"+t};Ht.toType=function(t){switch(t.toUpperCase()){case"A":return 1;case"NULL":return 10;case"AAAA":return 28;case"AFSDB":return 18;case"APL":return 42;case"CAA":return 257;case"CDNSKEY":return 60;case"CDS":return 59;case"CERT":return 37;case"CNAME":return 5;case"DHCID":return 49;case"DLV":return 32769;case"DNAME":return 39;case"DNSKEY":return 48;case"DS":return 43;case"HIP":return 55;case"HINFO":return 13;case"IPSECKEY":return 45;case"KEY":return 25;case"KX":return 36;case"LOC":return 29;case"MX":return 15;case"NAPTR":return 35;case"NS":return 2;case"NSEC":return 47;case"NSEC3":return 50;case"NSEC3PARAM":return 51;case"PTR":return 12;case"RRSIG":return 46;case"RP":return 17;case"SIG":return 24;case"SOA":return 6;case"SPF":return 99;case"SRV":return 33;case"SSHFP":return 44;case"TA":return 32768;case"TKEY":return 249;case"TLSA":return 52;case"TSIG":return 250;case"TXT":return 16;case"AXFR":return 252;case"IXFR":return 251;case"OPT":return 41;case"ANY":return 255;case"*":return 255}return 0}});var gn=d(Yt=>{Yt.toString=function(t){switch(t){case 0:return"NOERROR";case 1:return"FORMERR";case 2:return"SERVFAIL";case 3:return"NXDOMAIN";case 4:return"NOTIMP";case 5:return"REFUSED";case 6:return"YXDOMAIN";case 7:return"YXRRSET";case 8:return"NXRRSET";case 9:return"NOTAUTH";case 10:return"NOTZONE";case 11:return"RCODE_11";case 12:return"RCODE_12";case 13:return"RCODE_13";case 14:return"RCODE_14";case 15:return"RCODE_15"}return"RCODE_"+t};Yt.toRcode=function(t){switch(t.toUpperCase()){case"NOERROR":return 0;case"FORMERR":return 1;case"SERVFAIL":return 2;case"NXDOMAIN":return 3;case"NOTIMP":return 4;case"REFUSED":return 5;case"YXDOMAIN":return 6;case"YXRRSET":return 7;case"NXRRSET":return 8;case"NOTAUTH":return 9;case"NOTZONE":return 10;case"RCODE_11":return 11;case"RCODE_12":return 12;case"RCODE_13":return 13;case"RCODE_14":return 14;case"RCODE_15":return 15}return 0}});var vn=d(Vt=>{Vt.toString=function(t){switch(t){case 0:return"QUERY";case 1:return"IQUERY";case 2:return"STATUS";case 3:return"OPCODE_3";case 4:return"NOTIFY";case 5:return"UPDATE";case 6:return"OPCODE_6";case 7:return"OPCODE_7";case 8:return"OPCODE_8";case 9:return"OPCODE_9";case 10:return"OPCODE_10";case 11:return"OPCODE_11";case 12:return"OPCODE_12";case 13:return"OPCODE_13";case 14:return"OPCODE_14";case 15:return"OPCODE_15"}return"OPCODE_"+t};Vt.toOpcode=function(t){switch(t.toUpperCase()){case"QUERY":return 0;case"IQUERY":return 1;case"STATUS":return 2;case"OPCODE_3":return 3;case"NOTIFY":return 4;case"UPDATE":return 5;case"OPCODE_6":return 6;case"OPCODE_7":return 7;case"OPCODE_8":return 8;case"OPCODE_9":return 9;case"OPCODE_10":return 10;case"OPCODE_11":return 11;case"OPCODE_12":return 12;case"OPCODE_13":return 13;case"OPCODE_14":return 14;case"OPCODE_15":return 15}return 0}});var _n=d(mn=>{var p=mn,{Buffer:Ze}=require("buffer"),Qa=require("os");p.toBuffer=function(t,e,r){r=~~r;var n;if(this.isV4Format(t))n=e||new Ze(r+4),t.split(/\./g).map(f=>{n[r++]=parseInt(f,10)&255});else if(this.isV6Format(t)){var i=t.split(":",8),s;for(s=0;s<i.length;s++){var o=this.isV4Format(i[s]),a;o&&(a=this.toBuffer(i[s]),i[s]=a.slice(0,2).toString("hex")),a&&++s<8&&i.splice(s,0,a.slice(2,4).toString("hex"))}if(i[0]==="")for(;i.length<8;)i.unshift("0");else if(i[i.length-1]==="")for(;i.length<8;)i.push("0");else if(i.length<8){for(s=0;s<i.length&&i[s]!=="";s++);var l=[s,1];for(s=9-i.length;s>0;s--)l.push("0");i.splice.apply(i,l)}for(n=e||new Ze(r+16),s=0;s<i.length;s++){var c=parseInt(i[s],16);n[r++]=c>>8&255,n[r++]=c&255}}if(!n)throw Error(`Invalid ip address: ${t}`);return n};p.toString=function(t,e,r){e=~~e,r=r||t.length-e;var n=[],i;if(r===4){for(i=0;i<r;i++)n.push(t[e+i]);n=n.join(".")}else if(r===16){for(i=0;i<r;i+=2)n.push(t.readUInt16BE(e+i).toString(16));n=n.join(":"),n=n.replace(/(^|:)0(:0)*:0(:|$)/,"$1::$3"),n=n.replace(/:{3,4}/,"::")}return n};var Za=/^(\d{1,3}\.){3,3}\d{1,3}$/,Ja=/^(::)?(((\d{1,3}\.){3}(\d{1,3}){1})?([0-9a-f]){0,4}:{0,2}){1,8}(::)?$/i;p.isV4Format=function(t){return Za.test(t)};p.isV6Format=function(t){return Ja.test(t)};function Te(t){return t===4?"ipv4":t===6?"ipv6":t?t.toLowerCase():"ipv4"}p.fromPrefixLen=function(t,e){t>32?e="ipv6":e=Te(e);var r=4;e==="ipv6"&&(r=16);for(var n=new Ze(r),i=0,s=n.length;i<s;++i){var o=8;t<8&&(o=t),t-=o,n[i]=~(255>>o)&255}return p.toString(n)};p.mask=function(t,e){t=p.toBuffer(t),e=p.toBuffer(e);var r=new Ze(Math.max(t.length,e.length)),n;if(t.length===e.length)for(n=0;n<t.length;n++)r[n]=t[n]&e[n];else if(e.length===4)for(n=0;n<e.length;n++)r[n]=t[t.length-4+n]&e[n];else{for(n=0;n<r.length-6;n++)r[n]=0;for(r[10]=255,r[11]=255,n=0;n<t.length;n++)r[n+12]=t[n]&e[n+12];n+=12}for(;n<r.length;n++)r[n]=0;return p.toString(r)};p.cidr=function(t){var e=t.split("/"),r=e[0];if(e.length!==2)throw new Error(`invalid CIDR subnet: ${r}`);var n=p.fromPrefixLen(parseInt(e[1],10));return p.mask(r,n)};p.subnet=function(t,e){for(var r=p.toLong(p.mask(t,e)),n=p.toBuffer(e),i=0,s=0;s<n.length;s++)if(n[s]===255)i+=8;else for(var o=n[s]&255;o;)o=o<<1&255,i++;var a=Math.pow(2,32-i);return{networkAddress:p.fromLong(r),firstAddress:a<=2?p.fromLong(r):p.fromLong(r+1),lastAddress:a<=2?p.fromLong(r+a-1):p.fromLong(r+a-2),broadcastAddress:p.fromLong(r+a-1),subnetMask:e,subnetMaskLength:i,numHosts:a<=2?a:a-2,length:a,contains(l){return r===p.toLong(p.mask(l,e))}}};p.cidrSubnet=function(t){var e=t.split("/"),r=e[0];if(e.length!==2)throw new Error(`invalid CIDR subnet: ${r}`);var n=p.fromPrefixLen(parseInt(e[1],10));return p.subnet(r,n)};p.not=function(t){for(var e=p.toBuffer(t),r=0;r<e.length;r++)e[r]=255^e[r];return p.toString(e)};p.or=function(t,e){var r;if(t=p.toBuffer(t),e=p.toBuffer(e),t.length===e.length){for(r=0;r<t.length;++r)t[r]|=e[r];return p.toString(t)}var n=t,i=e;e.length>t.length&&(n=e,i=t);var s=n.length-i.length;for(r=s;r<n.length;++r)n[r]|=i[r-s];return p.toString(n)};p.isEqual=function(t,e){var r;if(t=p.toBuffer(t),e=p.toBuffer(e),t.length===e.length){for(r=0;r<t.length;r++)if(t[r]!==e[r])return!1;return!0}if(e.length===4){var n=e;e=t,t=n}for(r=0;r<10;r++)if(e[r]!==0)return!1;var i=e.readUInt16BE(10);if(i!==0&&i!==65535)return!1;for(r=0;r<4;r++)if(t[r]!==e[r+12])return!1;return!0};p.isPrivate=function(t){if(p.isLoopback(t))return!0;if(!p.isV6Format(t)){let e=p.normalizeToLong(t);if(e<0)throw new Error("invalid ipv4 address");t=p.fromLong(e)}return/^(::f{4}:)?10\.([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})$/i.test(t)||/^(::f{4}:)?192\.168\.([0-9]{1,3})\.([0-9]{1,3})$/i.test(t)||/^(::f{4}:)?172\.(1[6-9]|2\d|30|31)\.([0-9]{1,3})\.([0-9]{1,3})$/i.test(t)||/^(::f{4}:)?169\.254\.([0-9]{1,3})\.([0-9]{1,3})$/i.test(t)||/^f[cd][0-9a-f]{2}:/i.test(t)||/^fe80:/i.test(t)||/^::1$/.test(t)||/^::$/.test(t)};p.isPublic=function(t){return!p.isPrivate(t)};p.isLoopback=function(t){return!/\./.test(t)&&!/:/.test(t)&&(t=p.fromLong(Number(t))),/^(::f{4}:)?127\.([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})/.test(t)||/^0177\./.test(t)||/^0x7f\./i.test(t)||/^fe80::1$/i.test(t)||/^::1$/.test(t)||/^::$/.test(t)};p.loopback=function(t){if(t=Te(t),t!=="ipv4"&&t!=="ipv6")throw new Error("family must be ipv4 or ipv6");return t==="ipv4"?"127.0.0.1":"fe80::1"};p.address=function(t,e){var r=Qa.networkInterfaces();if(e=Te(e),t&&t!=="private"&&t!=="public"){var n=r[t].filter(s=>{var o=Te(s.family);return o===e});return n.length===0?void 0:n[0].address}var i=Object.keys(r).map(s=>{var o=r[s].filter(a=>(a.family=Te(a.family),a.family!==e||p.isLoopback(a.address)?!1:t?t==="public"?p.isPrivate(a.address):p.isPublic(a.address):!0));return o.length?o[0].address:void 0}).filter(Boolean);return i.length?i[0]:p.loopback(e)};p.toLong=function(t){var e=0;return t.split(".").forEach(r=>{e<<=8,e+=parseInt(r)}),e>>>0};p.fromLong=function(t){return`${t>>>24}.${t>>16&255}.${t>>8&255}.${t&255}`};p.normalizeToLong=function(t){let e=t.split(".").map(i=>i.startsWith("0x")||i.startsWith("0X")?parseInt(i,16):i.startsWith("0")&&i!=="0"&&/^[0-7]+$/.test(i)?parseInt(i,8):/^[1-9]\d*$/.test(i)||i==="0"?parseInt(i,10):NaN);if(e.some(isNaN))return-1;let r=0;switch(e.length){case 1:r=e[0];break;case 2:if(e[0]>255||e[1]>16777215)return-1;r=e[0]<<24|e[1]&16777215;break;case 3:if(e[0]>255||e[1]>255||e[2]>65535)return-1;r=e[0]<<24|e[1]<<16|e[2]&65535;break;case 4:if(e.some(i=>i>255))return-1;r=e[0]<<24|e[1]<<16|e[2]<<8|e[3];break;default:return-1}return r>>>0}});var xn=d((Xt,En)=>{var Je=require("buffer"),q=Je.Buffer;function Sn(t,e){for(var r in t)e[r]=t[r]}q.from&&q.alloc&&q.allocUnsafe&&q.allocUnsafeSlow?En.exports=Je:(Sn(Je,Xt),Xt.Buffer=de);function de(t,e,r){return q(t,e,r)}Sn(q,de);de.from=function(t,e,r){if(typeof t=="number")throw new TypeError("Argument must not be a number");return q(t,e,r)};de.alloc=function(t,e,r){if(typeof t!="number")throw new TypeError("Argument must be a number");var n=q(t);return e!==void 0?typeof r=="string"?n.fill(e,r):n.fill(e):n.fill(0),n};de.allocUnsafe=function(t){if(typeof t!="number")throw new TypeError("Argument must be a number");return q(t)};de.allocUnsafeSlow=function(t){if(typeof t!="number")throw new TypeError("Argument must be a number");return Je.SlowBuffer(t)}});var On=d(S=>{var nt=yn(),ec=gn(),tc=vn(),it=_n(),x=xn().Buffer,rc=0,bn=32768,zt=32768,nc=~zt,wn=32768,ic=~wn,y=S.txt=S.name={};y.encode=function(t,e,r){e||(e=x.alloc(y.encodingLength(t))),r||(r=0);var n=r,i=t.replace(/^\.|\.$/gm,"");if(i.length)for(var s=i.split("."),o=0;o<s.length;o++){var a=e.write(s[o],r+1);e[r]=a,r+=a+1}return e[r++]=0,y.encode.bytes=r-n,e};y.encode.bytes=0;y.decode=function(t,e){e||(e=0);var r=[],n=e,i=t[e++];if(i===0)return y.decode.bytes=1,".";if(i>=192){var s=y.decode(t,t.readUInt16BE(e-1)-49152);return y.decode.bytes=2,s}for(;i;){if(i>=192){r.push(y.decode(t,t.readUInt16BE(e-1)-49152)),e++;break}r.push(t.toString("utf-8",e,e+i)),e+=i,i=t[e++]}return y.decode.bytes=e-n,r.join(".")};y.decode.bytes=0;y.encodingLength=function(t){return t==="."||t===".."?1:x.byteLength(t.replace(/^\.|\.$/gm,""))+2};var E={};E.encode=function(t,e,r){e||(e=x.alloc(E.encodingLength(t))),r||(r=0);var n=e.write(t,r+1);return e[r]=n,E.encode.bytes=n+1,e};E.encode.bytes=0;E.decode=function(t,e){e||(e=0);var r=t[e],n=t.toString("utf-8",e+1,e+1+r);return E.decode.bytes=r+1,n};E.decode.bytes=0;E.encodingLength=function(t){return x.byteLength(t)+1};var U={};U.encode=function(t,e,r){e||(e=U.encodingLength(t)),r||(r=0);var n=(t.flags||0)&32767,i=t.type==="response"?bn:rc;return e.writeUInt16BE(t.id||0,r),e.writeUInt16BE(n|i,r+2),e.writeUInt16BE(t.questions.length,r+4),e.writeUInt16BE(t.answers.length,r+6),e.writeUInt16BE(t.authorities.length,r+8),e.writeUInt16BE(t.additionals.length,r+10),e};U.encode.bytes=12;U.decode=function(t,e){if(e||(e=0),t.length<12)throw new Error("Header must be 12 bytes");var r=t.readUInt16BE(e+2);return{id:t.readUInt16BE(e),type:r&bn?"response":"query",flags:r&32767,flag_qr:(r>>15&1)===1,opcode:tc.toString(r>>11&15),flag_auth:(r>>10&1)===1,flag_trunc:(r>>9&1)===1,flag_rd:(r>>8&1)===1,flag_ra:(r>>7&1)===1,flag_z:(r>>6&1)===1,flag_ad:(r>>5&1)===1,flag_cd:(r>>4&1)===1,rcode:ec.toString(r&15),questions:new Array(t.readUInt16BE(e+4)),answers:new Array(t.readUInt16BE(e+6)),authorities:new Array(t.readUInt16BE(e+8)),additionals:new Array(t.readUInt16BE(e+10))}};U.decode.bytes=12;U.encodingLength=function(){return 12};var M=S.unknown={};M.encode=function(t,e,r){return e||(e=x.alloc(M.encodingLength(t))),r||(r=0),e.writeUInt16BE(t.length,r),t.copy(e,r+2),M.encode.bytes=t.length+2,e};M.encode.bytes=0;M.decode=function(t,e){e||(e=0);var r=t.readUInt16BE(e),n=t.slice(e+2,e+2+r);return M.decode.bytes=r+2,n};M.decode.bytes=0;M.encodingLength=function(t){return t.length+2};var $=S.ns={};$.encode=function(t,e,r){return e||(e=x.alloc($.encodingLength(t))),r||(r=0),y.encode(t,e,r+2),e.writeUInt16BE(y.encode.bytes,r),$.encode.bytes=y.encode.bytes+2,e};$.encode.bytes=0;$.decode=function(t,e){e||(e=0);var r=t.readUInt16BE(e),n=y.decode(t,e+2);return $.decode.bytes=r+2,n};$.decode.bytes=0;$.encodingLength=function(t){return y.encodingLength(t)+2};var j=S.soa={};j.encode=function(t,e,r){e||(e=x.alloc(j.encodingLength(t))),r||(r=0);var n=r;return r+=2,y.encode(t.mname,e,r),r+=y.encode.bytes,y.encode(t.rname,e,r),r+=y.encode.bytes,e.writeUInt32BE(t.serial||0,r),r+=4,e.writeUInt32BE(t.refresh||0,r),r+=4,e.writeUInt32BE(t.retry||0,r),r+=4,e.writeUInt32BE(t.expire||0,r),r+=4,e.writeUInt32BE(t.minimum||0,r),r+=4,e.writeUInt16BE(r-n-2,n),j.encode.bytes=r-n,e};j.encode.bytes=0;j.decode=function(t,e){e||(e=0);var r=e,n={};return e+=2,n.mname=y.decode(t,e),e+=y.decode.bytes,n.rname=y.decode(t,e),e+=y.decode.bytes,n.serial=t.readUInt32BE(e),e+=4,n.refresh=t.readUInt32BE(e),e+=4,n.retry=t.readUInt32BE(e),e+=4,n.expire=t.readUInt32BE(e),e+=4,n.minimum=t.readUInt32BE(e),e+=4,j.decode.bytes=e-r,n};j.decode.bytes=0;j.encodingLength=function(t){return 22+y.encodingLength(t.mname)+y.encodingLength(t.rname)};var D=S.txt=S.null={},sc=D;D.encode=function(t,e,r){e||(e=x.alloc(D.encodingLength(t))),r||(r=0),typeof t=="string"&&(t=x.from(t)),t||(t=x.alloc(0));var n=r;r+=2;var i=t.length;return t.copy(e,r,0,i),r+=i,e.writeUInt16BE(r-n-2,n),D.encode.bytes=r-n,e};D.encode.bytes=0;D.decode=function(t,e){e||(e=0);var r=e,n=t.readUInt16BE(e);e+=2;var i=t.slice(e,e+n);return e+=n,D.decode.bytes=e-r,i};D.decode.bytes=0;D.encodingLength=function(t){return t?(x.isBuffer(t)?t.length:x.byteLength(t))+2:2};var W=S.hinfo={};W.encode=function(t,e,r){e||(e=x.alloc(W.encodingLength(t))),r||(r=0);var n=r;return r+=2,E.encode(t.cpu,e,r),r+=E.encode.bytes,E.encode(t.os,e,r),r+=E.encode.bytes,e.writeUInt16BE(r-n-2,n),W.encode.bytes=r-n,e};W.encode.bytes=0;W.decode=function(t,e){e||(e=0);var r=e,n={};return e+=2,n.cpu=E.decode(t,e),e+=E.decode.bytes,n.os=E.decode(t,e),e+=E.decode.bytes,W.decode.bytes=e-r,n};W.decode.bytes=0;W.encodingLength=function(t){return E.encodingLength(t.cpu)+E.encodingLength(t.os)+2};var N=S.ptr={},oc=S.cname=N,ac=S.dname=N;N.encode=function(t,e,r){return e||(e=x.alloc(N.encodingLength(t))),r||(r=0),y.encode(t,e,r+2),e.writeUInt16BE(y.encode.bytes,r),N.encode.bytes=y.encode.bytes+2,e};N.encode.bytes=0;N.decode=function(t,e){e||(e=0);var r=y.decode(t,e+2);return N.decode.bytes=y.decode.bytes+2,r};N.decode.bytes=0;N.encodingLength=function(t){return y.encodingLength(t)+2};var G=S.srv={};G.encode=function(t,e,r){e||(e=x.alloc(G.encodingLength(t))),r||(r=0),e.writeUInt16BE(t.priority||0,r+2),e.writeUInt16BE(t.weight||0,r+4),e.writeUInt16BE(t.port||0,r+6),y.encode(t.target,e,r+8);var n=y.encode.bytes+6;return e.writeUInt16BE(n,r),G.encode.bytes=n+2,e};G.encode.bytes=0;G.decode=function(t,e){e||(e=0);var r=t.readUInt16BE(e),n={};return n.priority=t.readUInt16BE(e+2),n.weight=t.readUInt16BE(e+4),n.port=t.readUInt16BE(e+6),n.target=y.decode(t,e+8),G.decode.bytes=r+2,n};G.decode.bytes=0;G.encodingLength=function(t){return 8+y.encodingLength(t.target)};var I=S.caa={};I.ISSUER_CRITICAL=128;I.encode=function(t,e,r){var n=I.encodingLength(t);return e||(e=x.alloc(I.encodingLength(t))),r||(r=0),t.issuerCritical&&(t.flags=I.ISSUER_CRITICAL),e.writeUInt16BE(n-2,r),r+=2,e.writeUInt8(t.flags||0,r),r+=1,E.encode(t.tag,e,r),r+=E.encode.bytes,e.write(t.value,r),r+=x.byteLength(t.value),I.encode.bytes=n,e};I.encode.bytes=0;I.decode=function(t,e){e||(e=0);var r=t.readUInt16BE(e);e+=2;var n=e,i={};return i.flags=t.readUInt8(e),e+=1,i.tag=E.decode(t,e),e+=E.decode.bytes,i.value=t.toString("utf-8",e,n+r),i.issuerCritical=!!(i.flags&I.ISSUER_CRITICAL),I.decode.bytes=r+2,i};I.decode.bytes=0;I.encodingLength=function(t){return E.encodingLength(t.tag)+E.encodingLength(t.value)+2};var H=S.a={};H.encode=function(t,e,r){return e||(e=x.alloc(H.encodingLength(t))),r||(r=0),e.writeUInt16BE(4,r),r+=2,it.toBuffer(t,e,r),H.encode.bytes=6,e};H.encode.bytes=0;H.decode=function(t,e){e||(e=0),e+=2;var r=it.toString(t,e,4);return H.decode.bytes=6,r};H.decode.bytes=0;H.encodingLength=function(){return 6};var Y=S.aaaa={};Y.encode=function(t,e,r){return e||(e=x.alloc(Y.encodingLength(t))),r||(r=0),e.writeUInt16BE(16,r),r+=2,it.toBuffer(t,e,r),Y.encode.bytes=18,e};Y.encode.bytes=0;Y.decode=function(t,e){e||(e=0),e+=2;var r=it.toString(t,e,16);return Y.decode.bytes=18,r};Y.decode.bytes=0;Y.encodingLength=function(){return 18};var Kt=S.record=function(t){switch(t.toUpperCase()){case"A":return H;case"PTR":return N;case"CNAME":return oc;case"DNAME":return ac;case"TXT":return D;case"NULL":return sc;case"AAAA":return Y;case"SRV":return G;case"HINFO":return W;case"CAA":return I;case"NS":return $;case"SOA":return j}return M},T=S.answer={};T.encode=function(t,e,r){e||(e=x.alloc(T.encodingLength(t))),r||(r=0);var n=r;y.encode(t.name,e,r),r+=y.encode.bytes,e.writeUInt16BE(nt.toType(t.type),r);var i=t.class===void 0?1:t.class;t.flush&&(i|=zt),e.writeUInt16BE(i,r+2),e.writeUInt32BE(t.ttl||0,r+4);var s=Kt(t.type);return s.encode(t.data,e,r+8),r+=8+s.encode.bytes,T.encode.bytes=r-n,e};T.encode.bytes=0;T.decode=function(t,e){e||(e=0);var r={},n=e;r.name=y.decode(t,e),e+=y.decode.bytes,r.type=nt.toString(t.readUInt16BE(e)),r.class=t.readUInt16BE(e+2),r.ttl=t.readUInt32BE(e+4),r.flush=!!(r.class&zt),r.flush&&(r.class&=nc);var i=Kt(r.type);return r.data=i.decode(t,e+8),e+=8+i.decode.bytes,T.decode.bytes=e-n,r};T.decode.bytes=0;T.encodingLength=function(t){return y.encodingLength(t.name)+8+Kt(t.type).encodingLength(t.data)};var k=S.question={};k.encode=function(t,e,r){e||(e=x.alloc(k.encodingLength(t))),r||(r=0);var n=r;return y.encode(t.name,e,r),r+=y.encode.bytes,e.writeUInt16BE(nt.toType(t.type),r),r+=2,e.writeUInt16BE(t.class===void 0?1:t.class,r),r+=2,k.encode.bytes=r-n,t};k.encode.bytes=0;k.decode=function(t,e){e||(e=0);var r=e,n={};n.name=y.decode(t,e),e+=y.decode.bytes,n.type=nt.toString(t.readUInt16BE(e)),e+=2,n.class=t.readUInt16BE(e),e+=2;var i=!!(n.class&wn);return i&&(n.class&=ic),k.decode.bytes=e-r,n};k.decode.bytes=0;k.encodingLength=function(t){return y.encodingLength(t.name)+4};S.AUTHORITATIVE_ANSWER=1024;S.TRUNCATED_RESPONSE=512;S.RECURSION_DESIRED=256;S.RECURSION_AVAILABLE=128;S.AUTHENTIC_DATA=32;S.CHECKING_DISABLED=16;S.encode=function(t,e,r){var n=!e;n&&(e=x.alloc(S.encodingLength(t))),r||(r=0);var i=r;return t.questions||(t.questions=[]),t.answers||(t.answers=[]),t.authorities||(t.authorities=[]),t.additionals||(t.additionals=[]),U.encode(t,e,r),r+=U.encode.bytes,r=tt(t.questions,k,e,r),r=tt(t.answers,T,e,r),r=tt(t.authorities,T,e,r),r=tt(t.additionals,T,e,r),S.encode.bytes=r-i,n&&S.encode.bytes!==e.length?e.slice(0,S.encode.bytes):e};S.encode.bytes=0;S.decode=function(t,e){e||(e=0);var r=e,n=U.decode(t,e);return e+=U.decode.bytes,e=rt(n.questions,k,t,e),e=rt(n.answers,T,t,e),e=rt(n.authorities,T,t,e),e=rt(n.additionals,T,t,e),S.decode.bytes=e-r,n};S.decode.bytes=0;S.encodingLength=function(t){return U.encodingLength(t)+et(t.questions||[],k)+et(t.answers||[],T)+et(t.authorities||[],T)+et(t.additionals||[],T)};function et(t,e){for(var r=0,n=0;n<t.length;n++)r+=e.encodingLength(t[n]);return r}function tt(t,e,r,n){for(var i=0;i<t.length;i++)e.encode(t[i],r,n),n+=e.encode.bytes;return n}function rt(t,e,r,n){for(var i=0;i<t.length;i++)t[i]=e.decode(r,n),n+=e.decode.bytes;return n}});var Pn=d((Kf,Tn)=>{"use strict";var An=hc;process.nextTick(dc,42);Tn.exports=cc;function cc(t){var e=n;return r;function r(i){e(i||lc)}function n(i){var s=[i];e=o,t(a);function o(l){s.push(l)}function a(l){var c=arguments;for(e=uc(l)?n:f;s.length;)f(s.shift());function f(u){An(fc,u,c)}}}}function uc(t){return Object.prototype.toString.call(t)==="[object Error]"}function lc(){}function fc(t,e){t.apply(null,e)}function dc(t){t===42&&(An=process.nextTick)}function hc(t,e,r){process.nextTick(function(){t(e,r)})}});var Rn=d((Qf,In)=>{var Qt=On(),pc=require("dgram"),yc=Pn(),gc=require("events"),Cn=require("os"),Zt=function(){};In.exports=function(t){t||(t={});var e=new gc.EventEmitter,r=typeof t.port=="number"?t.port:5353,n=t.type||"udp4",i=t.ip||t.host||(n==="udp4"?"224.0.0.251":null),s={address:i,port:r},o={},a=!1,l=null;if(n==="udp6"&&(!i||!t.interface))throw new Error("For IPv6 multicast you must specify `ip` and `interface`");var c=t.socket||pc.createSocket({type:n,reuseAddr:t.reuseAddr!==!1,toString:function(){return n}});c.on("error",function(u){u.code==="EACCES"||u.code==="EADDRINUSE"?e.emit("error",u):e.emit("warning",u)}),c.on("message",function(u,h){try{u=Qt.decode(u)}catch(v){e.emit("warning",v);return}e.emit("packet",u,h),u.type==="query"&&e.emit("query",u,h),u.type==="response"&&e.emit("response",u,h)}),c.on("listening",function(){r||(r=s.port=c.address().port),t.multicast!==!1&&(e.update(),l=setInterval(e.update,5e3),c.setMulticastTTL(t.ttl||255),c.setMulticastLoopback(t.loopback!==!1))});var f=yc(function(u){if(!r)return u(null);c.once("error",u),c.bind(r,t.interface,function(){c.removeListener("error",u),u(null)})});return f(function(u){if(u)return e.emit("error",u);e.emit("ready")}),e.send=function(u,h,v){if(typeof h=="function")return e.send(u,null,h);v||(v=Zt),h||(h=s),f(_);function _(g){if(a)return v();if(g)return v(g);var O=Qt.encode(u);c.send(O,0,O.length,h.port,h.address||h.host,v)}},e.response=e.respond=function(u,h,v){Array.isArray(u)&&(u={answers:u}),u.type="response",u.flags=(u.flags||0)|Qt.AUTHORITATIVE_ANSWER,e.send(u,h,v)},e.query=function(u,h,v,_){if(typeof h=="function")return e.query(u,null,null,h);if(typeof h=="object"&&h&&h.port)return e.query(u,null,h,v);if(typeof v=="function")return e.query(u,h,null,v);_||(_=Zt),typeof u=="string"&&(u=[{name:u,type:h||"ANY"}]),Array.isArray(u)&&(u={type:"query",questions:u}),u.type="query",e.send(u,v,_)},e.destroy=function(u){if(u||(u=Zt),a)return process.nextTick(u);a=!0,clearInterval(l),c.once("close",u),c.close()},e.update=function(){for(var u=t.interface?[].concat(t.interface):mc(),h=!1,v=0;v<u.length;v++){var _=u[v];if(!o[_]){o[_]=!0,h=!0;try{c.addMembership(i,_)}catch(g){e.emit("warning",g)}}}!h||!c.setMulticastInterface||c.setMulticastInterface(t.interface||vc())},e};function vc(){for(var t=Cn.networkInterfaces(),e=Object.keys(t),r=0;r<e.length;r++)for(var n=t[e[r]],i=0;i<n.length;i++){var s=n[i];if(s.family==="IPv4"&&!s.internal)return s.address}return"127.0.0.1"}function mc(){for(var t=Cn.networkInterfaces(),e=Object.keys(t),r=[],n=0;n<e.length;n++)for(var i=t[e[n]],s=0;s<i.length;s++){var o=i[s];if(o.family==="IPv4"){r.push(o.address);break}}return r}});var Jt=d((Zf,Nn)=>{"use strict";var Ln=Object.prototype.toString;Nn.exports=function(e){var r=Ln.call(e),n=r==="[object Arguments]";return n||(n=r!=="[object Array]"&&e!==null&&typeof e=="object"&&typeof e.length=="number"&&e.length>=0&&Ln.call(e.callee)==="[object Function]"),n}});var jn=d((Jf,$n)=>{"use strict";var Mn;Object.keys||(Pe=Object.prototype.hasOwnProperty,er=Object.prototype.toString,kn=Jt(),tr=Object.prototype.propertyIsEnumerable,Un=!tr.call({toString:null},"toString"),Bn=tr.call(function(){},"prototype"),Ce=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],st=function(t){var e=t.constructor;return e&&e.prototype===t},Dn={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},Fn=function(){if(typeof window>"u")return!1;for(var t in window)try{if(!Dn["$"+t]&&Pe.call(window,t)&&window[t]!==null&&typeof window[t]=="object")try{st(window[t])}catch{return!0}}catch{return!0}return!1}(),qn=function(t){if(typeof window>"u"||!Fn)return st(t);try{return st(t)}catch{return!1}},Mn=function(e){var r=e!==null&&typeof e=="object",n=er.call(e)==="[object Function]",i=kn(e),s=r&&er.call(e)==="[object String]",o=[];if(!r&&!n&&!i)throw new TypeError("Object.keys called on a non-object");var a=Bn&&n;if(s&&e.length>0&&!Pe.call(e,0))for(var l=0;l<e.length;++l)o.push(String(l));if(i&&e.length>0)for(var c=0;c<e.length;++c)o.push(String(c));else for(var f in e)!(a&&f==="prototype")&&Pe.call(e,f)&&o.push(String(f));if(Un)for(var u=qn(e),h=0;h<Ce.length;++h)!(u&&Ce[h]==="constructor")&&Pe.call(e,Ce[h])&&o.push(Ce[h]);return o});var Pe,er,kn,tr,Un,Bn,Ce,st,Dn,Fn,qn;$n.exports=Mn});var rr=d((ed,Hn)=>{"use strict";var _c=Array.prototype.slice,Sc=Jt(),Wn=Object.keys,ot=Wn?function(e){return Wn(e)}:jn(),Gn=Object.keys;ot.shim=function(){if(Object.keys){var e=function(){var r=Object.keys(arguments);return r&&r.length===arguments.length}(1,2);e||(Object.keys=function(n){return Sc(n)?Gn(_c.call(n)):Gn(n)})}else Object.keys=ot;return Object.keys||ot};Hn.exports=ot});var nr=d((td,Yn)=>{"use strict";Yn.exports=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var e={},r=Symbol("test"),n=Object(r);if(typeof r=="string"||Object.prototype.toString.call(r)!=="[object Symbol]"||Object.prototype.toString.call(n)!=="[object Symbol]")return!1;var i=42;e[r]=i;for(r in e)return!1;if(typeof Object.keys=="function"&&Object.keys(e).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(e).length!==0)return!1;var s=Object.getOwnPropertySymbols(e);if(s.length!==1||s[0]!==r||!Object.prototype.propertyIsEnumerable.call(e,r))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var o=Object.getOwnPropertyDescriptor(e,r);if(o.value!==i||o.enumerable!==!0)return!1}return!0}});var at=d((rd,Vn)=>{"use strict";var Ec=nr();Vn.exports=function(){return Ec()&&!!Symbol.toStringTag}});var zn=d((nd,Xn)=>{"use strict";Xn.exports=Error});var Qn=d((id,Kn)=>{"use strict";Kn.exports=EvalError});var Jn=d((sd,Zn)=>{"use strict";Zn.exports=RangeError});var ti=d((od,ei)=>{"use strict";ei.exports=ReferenceError});var ir=d((ad,ri)=>{"use strict";ri.exports=SyntaxError});var he=d((cd,ni)=>{"use strict";ni.exports=TypeError});var si=d((ud,ii)=>{"use strict";ii.exports=URIError});var ci=d((ld,ai)=>{"use strict";var oi=typeof Symbol<"u"&&Symbol,xc=nr();ai.exports=function(){return typeof oi!="function"||typeof Symbol!="function"||typeof oi("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:xc()}});var fi=d((fd,li)=>{"use strict";var ui={foo:{}},bc=Object;li.exports=function(){return{__proto__:ui}.foo===ui.foo&&!({__proto__:null}instanceof bc)}});var pi=d((dd,hi)=>{"use strict";var wc="Function.prototype.bind called on incompatible ",Oc=Object.prototype.toString,Ac=Math.max,Tc="[object Function]",di=function(e,r){for(var n=[],i=0;i<e.length;i+=1)n[i]=e[i];for(var s=0;s<r.length;s+=1)n[s+e.length]=r[s];return n},Pc=function(e,r){for(var n=[],i=r||0,s=0;i<e.length;i+=1,s+=1)n[s]=e[i];return n},Cc=function(t,e){for(var r="",n=0;n<t.length;n+=1)r+=t[n],n+1<t.length&&(r+=e);return r};hi.exports=function(e){var r=this;if(typeof r!="function"||Oc.apply(r)!==Tc)throw new TypeError(wc+r);for(var n=Pc(arguments,1),i,s=function(){if(this instanceof i){var f=r.apply(this,di(n,arguments));return Object(f)===f?f:this}return r.apply(e,di(n,arguments))},o=Ac(0,r.length-n.length),a=[],l=0;l<o;l++)a[l]="$"+l;if(i=Function("binder","return function ("+Cc(a,",")+"){ return binder.apply(this,arguments); }")(s),r.prototype){var c=function(){};c.prototype=r.prototype,i.prototype=new c,c.prototype=null}return i}});var ct=d((hd,yi)=>{"use strict";var Ic=pi();yi.exports=Function.prototype.bind||Ic});var vi=d((pd,gi)=>{"use strict";var Rc=Function.prototype.call,Lc=Object.prototype.hasOwnProperty,Nc=ct();gi.exports=Nc.call(Rc,Lc)});var me=d((yd,xi)=>{"use strict";var m,kc=zn(),Uc=Qn(),Bc=Jn(),Dc=ti(),ve=ir(),ge=he(),Fc=si(),Ei=Function,sr=function(t){try{return Ei('"use strict"; return ('+t+").constructor;")()}catch{}},se=Object.getOwnPropertyDescriptor;if(se)try{se({},"")}catch{se=null}var or=function(){throw new ge},qc=se?function(){try{return arguments.callee,or}catch{try{return se(arguments,"callee").get}catch{return or}}}():or,pe=ci()(),Mc=fi()(),w=Object.getPrototypeOf||(Mc?function(t){return t.__proto__}:null),ye={},$c=typeof Uint8Array>"u"||!w?m:w(Uint8Array),oe={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?m:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?m:ArrayBuffer,"%ArrayIteratorPrototype%":pe&&w?w([][Symbol.iterator]()):m,"%AsyncFromSyncIteratorPrototype%":m,"%AsyncFunction%":ye,"%AsyncGenerator%":ye,"%AsyncGeneratorFunction%":ye,"%AsyncIteratorPrototype%":ye,"%Atomics%":typeof Atomics>"u"?m:Atomics,"%BigInt%":typeof BigInt>"u"?m:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?m:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?m:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?m:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":kc,"%eval%":eval,"%EvalError%":Uc,"%Float32Array%":typeof Float32Array>"u"?m:Float32Array,"%Float64Array%":typeof Float64Array>"u"?m:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?m:FinalizationRegistry,"%Function%":Ei,"%GeneratorFunction%":ye,"%Int8Array%":typeof Int8Array>"u"?m:Int8Array,"%Int16Array%":typeof Int16Array>"u"?m:Int16Array,"%Int32Array%":typeof Int32Array>"u"?m:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":pe&&w?w(w([][Symbol.iterator]())):m,"%JSON%":typeof JSON=="object"?JSON:m,"%Map%":typeof Map>"u"?m:Map,"%MapIteratorPrototype%":typeof Map>"u"||!pe||!w?m:w(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?m:Promise,"%Proxy%":typeof Proxy>"u"?m:Proxy,"%RangeError%":Bc,"%ReferenceError%":Dc,"%Reflect%":typeof Reflect>"u"?m:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?m:Set,"%SetIteratorPrototype%":typeof Set>"u"||!pe||!w?m:w(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?m:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":pe&&w?w(""[Symbol.iterator]()):m,"%Symbol%":pe?Symbol:m,"%SyntaxError%":ve,"%ThrowTypeError%":qc,"%TypedArray%":$c,"%TypeError%":ge,"%Uint8Array%":typeof Uint8Array>"u"?m:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?m:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?m:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?m:Uint32Array,"%URIError%":Fc,"%WeakMap%":typeof WeakMap>"u"?m:WeakMap,"%WeakRef%":typeof WeakRef>"u"?m:WeakRef,"%WeakSet%":typeof WeakSet>"u"?m:WeakSet};if(w)try{null.error}catch(t){mi=w(w(t)),oe["%Error.prototype%"]=mi}var mi,jc=function t(e){var r;if(e==="%AsyncFunction%")r=sr("async function () {}");else if(e==="%GeneratorFunction%")r=sr("function* () {}");else if(e==="%AsyncGeneratorFunction%")r=sr("async function* () {}");else if(e==="%AsyncGenerator%"){var n=t("%AsyncGeneratorFunction%");n&&(r=n.prototype)}else if(e==="%AsyncIteratorPrototype%"){var i=t("%AsyncGenerator%");i&&w&&(r=w(i.prototype))}return oe[e]=r,r},_i={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},Ie=ct(),ut=vi(),Wc=Ie.call(Function.call,Array.prototype.concat),Gc=Ie.call(Function.apply,Array.prototype.splice),Si=Ie.call(Function.call,String.prototype.replace),lt=Ie.call(Function.call,String.prototype.slice),Hc=Ie.call(Function.call,RegExp.prototype.exec),Yc=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,Vc=/\\(\\)?/g,Xc=function(e){var r=lt(e,0,1),n=lt(e,-1);if(r==="%"&&n!=="%")throw new ve("invalid intrinsic syntax, expected closing `%`");if(n==="%"&&r!=="%")throw new ve("invalid intrinsic syntax, expected opening `%`");var i=[];return Si(e,Yc,function(s,o,a,l){i[i.length]=a?Si(l,Vc,"$1"):o||s}),i},zc=function(e,r){var n=e,i;if(ut(_i,n)&&(i=_i[n],n="%"+i[0]+"%"),ut(oe,n)){var s=oe[n];if(s===ye&&(s=jc(n)),typeof s>"u"&&!r)throw new ge("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:i,name:n,value:s}}throw new ve("intrinsic "+e+" does not exist!")};xi.exports=function(e,r){if(typeof e!="string"||e.length===0)throw new ge("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof r!="boolean")throw new ge('"allowMissing" argument must be a boolean');if(Hc(/^%?[^%]*%?$/,e)===null)throw new ve("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var n=Xc(e),i=n.length>0?n[0]:"",s=zc("%"+i+"%",r),o=s.name,a=s.value,l=!1,c=s.alias;c&&(i=c[0],Gc(n,Wc([0,1],c)));for(var f=1,u=!0;f<n.length;f+=1){var h=n[f],v=lt(h,0,1),_=lt(h,-1);if((v==='"'||v==="'"||v==="`"||_==='"'||_==="'"||_==="`")&&v!==_)throw new ve("property names with quotes must have matching quotes");if((h==="constructor"||!u)&&(l=!0),i+="."+h,o="%"+i+"%",ut(oe,o))a=oe[o];else if(a!=null){if(!(h in a)){if(!r)throw new ge("base intrinsic for "+e+" exists, but the property is not available.");return}if(se&&f+1>=n.length){var g=se(a,h);u=!!g,u&&"get"in g&&!("originalValue"in g.get)?a=g.get:a=a[h]}else u=ut(a,h),a=a[h];u&&!l&&(oe[o]=a)}}return a}});var dt=d((gd,bi)=>{"use strict";var Kc=me(),ft=Kc("%Object.defineProperty%",!0)||!1;if(ft)try{ft({},"a",{value:1})}catch{ft=!1}bi.exports=ft});var ar=d((vd,wi)=>{"use strict";var Qc=me(),ht=Qc("%Object.getOwnPropertyDescriptor%",!0);if(ht)try{ht([],"length")}catch{ht=null}wi.exports=ht});var pt=d((md,Ti)=>{"use strict";var Oi=dt(),Zc=ir(),_e=he(),Ai=ar();Ti.exports=function(e,r,n){if(!e||typeof e!="object"&&typeof e!="function")throw new _e("`obj` must be an object or a function`");if(typeof r!="string"&&typeof r!="symbol")throw new _e("`property` must be a string or a symbol`");if(arguments.length>3&&typeof arguments[3]!="boolean"&&arguments[3]!==null)throw new _e("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&typeof arguments[4]!="boolean"&&arguments[4]!==null)throw new _e("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&typeof arguments[5]!="boolean"&&arguments[5]!==null)throw new _e("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&typeof arguments[6]!="boolean")throw new _e("`loose`, if provided, must be a boolean");var i=arguments.length>3?arguments[3]:null,s=arguments.length>4?arguments[4]:null,o=arguments.length>5?arguments[5]:null,a=arguments.length>6?arguments[6]:!1,l=!!Ai&&Ai(e,r);if(Oi)Oi(e,r,{configurable:o===null&&l?l.configurable:!o,enumerable:i===null&&l?l.enumerable:!i,value:n,writable:s===null&&l?l.writable:!s});else if(a||!i&&!s&&!o)e[r]=n;else throw new Zc("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.")}});var yt=d((_d,Ci)=>{"use strict";var cr=dt(),Pi=function(){return!!cr};Pi.hasArrayLengthDefineBug=function(){if(!cr)return null;try{return cr([],"length",{value:1}).length!==1}catch{return!0}};Ci.exports=Pi});var ki=d((Sd,Ni)=>{"use strict";var Jc=me(),Ii=pt(),eu=yt()(),Ri=ar(),Li=he(),tu=Jc("%Math.floor%");Ni.exports=function(e,r){if(typeof e!="function")throw new Li("`fn` is not a function");if(typeof r!="number"||r<0||r>4294967295||tu(r)!==r)throw new Li("`length` must be a positive 32-bit integer");var n=arguments.length>2&&!!arguments[2],i=!0,s=!0;if("length"in e&&Ri){var o=Ri(e,"length");o&&!o.configurable&&(i=!1),o&&!o.writable&&(s=!1)}return(i||s||!n)&&(eu?Ii(e,"length",r,!0,!0):Ii(e,"length",r)),e}});var mt=d((Ed,gt)=>{"use strict";var ur=ct(),vt=me(),ru=ki(),nu=he(),Di=vt("%Function.prototype.apply%"),Fi=vt("%Function.prototype.call%"),qi=vt("%Reflect.apply%",!0)||ur.call(Fi,Di),Ui=dt(),iu=vt("%Math.max%");gt.exports=function(e){if(typeof e!="function")throw new nu("a function is required");var r=qi(ur,Fi,arguments);return ru(r,1+iu(0,e.length-(arguments.length-1)),!0)};var Bi=function(){return qi(ur,Di,arguments)};Ui?Ui(gt.exports,"apply",{value:Bi}):gt.exports.apply=Bi});var lr=d((xd,ji)=>{"use strict";var Mi=me(),$i=mt(),su=$i(Mi("String.prototype.indexOf"));ji.exports=function(e,r){var n=Mi(e,!!r);return typeof n=="function"&&su(e,".prototype.")>-1?$i(n):n}});var Hi=d((bd,Gi)=>{"use strict";var ou=at()(),au=lr(),fr=au("Object.prototype.toString"),_t=function(e){return ou&&e&&typeof e=="object"&&Symbol.toStringTag in e?!1:fr(e)==="[object Arguments]"},Wi=function(e){return _t(e)?!0:e!==null&&typeof e=="object"&&typeof e.length=="number"&&e.length>=0&&fr(e)!=="[object Array]"&&fr(e.callee)==="[object Function]"},cu=function(){return _t(arguments)}();_t.isLegacyArguments=Wi;Gi.exports=cu?_t:Wi});var Se=d((wd,zi)=>{"use strict";var uu=rr(),lu=typeof Symbol=="function"&&typeof Symbol("foo")=="symbol",fu=Object.prototype.toString,du=Array.prototype.concat,Yi=pt(),hu=function(t){return typeof t=="function"&&fu.call(t)==="[object Function]"},Vi=yt()(),pu=function(t,e,r,n){if(e in t){if(n===!0){if(t[e]===r)return}else if(!hu(n)||!n())return}Vi?Yi(t,e,r,!0):Yi(t,e,r)},Xi=function(t,e){var r=arguments.length>2?arguments[2]:{},n=uu(e);lu&&(n=du.call(n,Object.getOwnPropertySymbols(e)));for(var i=0;i<n.length;i+=1)pu(t,n[i],e[n[i]],r[n[i]])};Xi.supportsDescriptors=!!Vi;zi.exports=Xi});var dr=d((Od,Qi)=>{"use strict";var Ki=function(t){return t!==t};Qi.exports=function(e,r){return e===0&&r===0?1/e===1/r:!!(e===r||Ki(e)&&Ki(r))}});var hr=d((Ad,Zi)=>{"use strict";var yu=dr();Zi.exports=function(){return typeof Object.is=="function"?Object.is:yu}});var es=d((Td,Ji)=>{"use strict";var gu=hr(),vu=Se();Ji.exports=function(){var e=gu();return vu(Object,{is:e},{is:function(){return Object.is!==e}}),e}});var is=d((Pd,ns)=>{"use strict";var mu=Se(),_u=mt(),Su=dr(),ts=hr(),Eu=es(),rs=_u(ts(),Object);mu(rs,{getPolyfill:ts,implementation:Su,shim:Eu});ns.exports=rs});var us=d((Cd,cs)=>{"use strict";var pr=lr(),ss=at()(),os,as,yr,gr;ss&&(os=pr("Object.prototype.hasOwnProperty"),as=pr("RegExp.prototype.exec"),yr={},St=function(){throw yr},gr={toString:St,valueOf:St},typeof Symbol.toPrimitive=="symbol"&&(gr[Symbol.toPrimitive]=St));var St,xu=pr("Object.prototype.toString"),bu=Object.getOwnPropertyDescriptor,wu="[object RegExp]";cs.exports=ss?function(e){if(!e||typeof e!="object")return!1;var r=bu(e,"lastIndex"),n=r&&os(r,"value");if(!n)return!1;try{as(e,gr)}catch(i){return i===yr}}:function(e){return!e||typeof e!="object"&&typeof e!="function"?!1:xu(e)===wu}});var fs=d((Id,ls)=>{"use strict";var Le=function(){return typeof function(){}.name=="string"},Re=Object.getOwnPropertyDescriptor;if(Re)try{Re([],"length")}catch{Re=null}Le.functionsHaveConfigurableNames=function(){if(!Le()||!Re)return!1;var e=Re(function(){},"name");return!!e&&!!e.configurable};var Ou=Function.prototype.bind;Le.boundFunctionsHaveNames=function(){return Le()&&typeof Ou=="function"&&function(){}.bind().name!==""};ls.exports=Le});var ps=d((Rd,hs)=>{"use strict";var ds=pt(),Au=yt()(),Tu=fs().functionsHaveConfigurableNames(),Pu=TypeError;hs.exports=function(e,r){if(typeof e!="function")throw new Pu("`fn` is not a function");var n=arguments.length>2&&!!arguments[2];return(!n||Tu)&&(Au?ds(e,"name",r,!0,!0):ds(e,"name",r)),e}});var vr=d((Ld,ys)=>{"use strict";var Cu=ps(),Iu=he(),Ru=Object;ys.exports=Cu(function(){if(this==null||this!==Ru(this))throw new Iu("RegExp.prototype.flags getter called on non-object");var e="";return this.hasIndices&&(e+="d"),this.global&&(e+="g"),this.ignoreCase&&(e+="i"),this.multiline&&(e+="m"),this.dotAll&&(e+="s"),this.unicode&&(e+="u"),this.unicodeSets&&(e+="v"),this.sticky&&(e+="y"),e},"get flags",!0)});var mr=d((Nd,gs)=>{"use strict";var Lu=vr(),Nu=Se().supportsDescriptors,ku=Object.getOwnPropertyDescriptor;gs.exports=function(){if(Nu&&/a/mig.flags==="gim"){var e=ku(RegExp.prototype,"flags");if(e&&typeof e.get=="function"&&typeof RegExp.prototype.dotAll=="boolean"&&typeof RegExp.prototype.hasIndices=="boolean"){var r="",n={};if(Object.defineProperty(n,"hasIndices",{get:function(){r+="d"}}),Object.defineProperty(n,"sticky",{get:function(){r+="y"}}),r==="dy")return e.get}}return Lu}});var _s=d((kd,ms)=>{"use strict";var Uu=Se().supportsDescriptors,Bu=mr(),Du=Object.getOwnPropertyDescriptor,Fu=Object.defineProperty,qu=TypeError,vs=Object.getPrototypeOf,Mu=/a/;ms.exports=function(){if(!Uu||!vs)throw new qu("RegExp.prototype.flags requires a true ES5 environment that supports property descriptors");var e=Bu(),r=vs(Mu),n=Du(r,"flags");return(!n||n.get!==e)&&Fu(r,"flags",{configurable:!0,enumerable:!1,get:e}),e}});var bs=d((Ud,xs)=>{"use strict";var $u=Se(),ju=mt(),Wu=vr(),Ss=mr(),Gu=_s(),Es=ju(Ss());$u(Es,{getPolyfill:Ss,implementation:Wu,shim:Gu});xs.exports=Es});var Os=d((Bd,ws)=>{"use strict";var Hu=Date.prototype.getDay,Yu=function(e){try{return Hu.call(e),!0}catch{return!1}},Vu=Object.prototype.toString,Xu="[object Date]",zu=at()();ws.exports=function(e){return typeof e!="object"||e===null?!1:zu?Yu(e):Vu.call(e)===Xu}});var Ds=d((Dd,Bs)=>{var As=rr(),Ts=Hi(),Ps=is(),Cs=us(),Is=bs(),Rs=Os(),Ls=Date.prototype.getTime;function Us(t,e,r){var n=r||{};return(n.strict?Ps(t,e):t===e)?!0:!t||!e||typeof t!="object"&&typeof e!="object"?n.strict?Ps(t,e):t==e:Ku(t,e,n)}function Ns(t){return t==null}function ks(t){return!(!t||typeof t!="object"||typeof t.length!="number"||typeof t.copy!="function"||typeof t.slice!="function"||t.length>0&&typeof t[0]!="number")}function Ku(t,e,r){var n,i;if(typeof t!=typeof e||Ns(t)||Ns(e)||t.prototype!==e.prototype||Ts(t)!==Ts(e))return!1;var s=Cs(t),o=Cs(e);if(s!==o)return!1;if(s||o)return t.source===e.source&&Is(t)===Is(e);if(Rs(t)&&Rs(e))return Ls.call(t)===Ls.call(e);var a=ks(t),l=ks(e);if(a!==l)return!1;if(a||l){if(t.length!==e.length)return!1;for(n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}if(typeof t!=typeof e)return!1;try{var c=As(t),f=As(e)}catch{return!1}if(c.length!==f.length)return!1;for(c.sort(),f.sort(),n=c.length-1;n>=0;n--)if(c[n]!=f[n])return!1;for(n=c.length-1;n>=0;n--)if(i=c[n],!Us(t[i],e[i],r))return!1;return!0}Bs.exports=Us});var qs=d((Fd,Fs)=>{"use strict";var Qu=Rn(),Zu=Ke(),Ju=Mt(),el=Ds();Fs.exports=Ne;function Ne(t){this.mdns=Qu(t),this.mdns.setMaxListeners(0),this.registry={},this.mdns.on("query",this._respondToQuery.bind(this))}Ne.prototype.register=function(t){var e=this;Array.isArray(t)?t.forEach(r):r(t);function r(n){var i=e.registry[n.type];if(!i)i=e.registry[n.type]=[];else if(i.some(tl(n)))return;i.push(n)}};Ne.prototype.unregister=function(t){var e=this;Array.isArray(t)?t.forEach(r):r(t);function r(n){var i=n.type;i in e.registry&&(e.registry[i]=e.registry[i].filter(function(s){return s.name!==n.name}))}};Ne.prototype._respondToQuery=function(t){var e=this;t.questions.forEach(function(r){var n=r.type,i=r.name,s=n==="ANY"?Ju.depth(Object.keys(e.registry).map(e._recordsFor.bind(e,i)),1):e._recordsFor(i,n);if(s.length!==0){var o=[];n!=="ANY"&&(s.forEach(function(a){a.type==="PTR"&&(o=o.concat(e._recordsFor(a.data,"SRV")).concat(e._recordsFor(a.data,"TXT")))}),o.filter(function(a){return a.type==="SRV"}).map(function(a){return a.data.target}).filter(rl()).forEach(function(a){o=o.concat(e._recordsFor(a,"A")).concat(e._recordsFor(a,"AAAA"))})),e.mdns.respond({answers:s,additionals:o},function(a){if(a)throw a})}})};Ne.prototype._recordsFor=function(t,e){return e in this.registry?this.registry[e].filter(function(r){var n=~t.indexOf(".")?r.name:r.name.split(".")[0];return Zu(n,t)}):[]};function tl(t){return function(e){return t.type===e.type&&t.name===e.name&&el(t.data,e.data)}}function rl(){var t=[];return function(e){return~t.indexOf(e)?!1:(t.push(e),!0)}}});var Gs=d((qd,Ws)=>{"use strict";var nl=require("util"),Ms=require("events").EventEmitter,$s=$t(),ke=Ke(),il=Wt(),js=".local",sl="_services._dns-sd._udp"+js;Ws.exports=Z;nl.inherits(Z,Ms);function Z(t,e,r){if(typeof e=="function")return new Z(t,null,e);Ms.call(this),this._mdns=t,this._onresponse=null,this._serviceMap={},this._txt=il(e.txt),!e||!e.type?(this._name=sl,this._wildcard=!0):(this._name=$s.stringify(e.type,e.protocol||"tcp")+js,e.name&&(this._name=e.name+"."+this._name),this._wildcard=!1),this.services=[],r&&this.on("up",r),this.start()}Z.prototype.start=function(){if(!this._onresponse){var t=this,e={};this._wildcard||(e[this._name]=!0),this._onresponse=function(r,n){t._wildcard&&r.answers.forEach(function(i){i.type!=="PTR"||i.name!==t._name||i.name in e||(e[i.data]=!0,t._mdns.query(i.data,"PTR"))}),Object.keys(e).forEach(function(i){ol(i,r).forEach(t._removeService.bind(t));var s=al(i,r,t._txt,n);s.length!==0&&s.forEach(function(o){t._serviceMap[o.fqdn]||t._addService(o)})})},this._mdns.on("response",this._onresponse),this.update()}};Z.prototype.stop=function(){this._onresponse&&(this._mdns.removeListener("response",this._onresponse),this._onresponse=null)};Z.prototype.update=function(){this._mdns.query(this._name,"PTR")};Z.prototype._addService=function(t){this.services.push(t),this._serviceMap[t.fqdn]=!0,this.emit("up",t)};Z.prototype._removeService=function(t){var e,r;this.services.some(function(n,i){if(ke(n.fqdn,t))return e=n,r=i,!0}),e&&(this.services.splice(r,1),delete this._serviceMap[t],this.emit("down",e))};function ol(t,e){return e.answers.concat(e.additionals).filter(function(r){return r.type==="PTR"&&r.ttl===0&&ke(r.name,t)}).map(function(r){return r.data})}function al(t,e,r,n){var i=e.answers.concat(e.additionals).filter(function(s){return s.ttl>0});return i.filter(function(s){return s.type==="PTR"&&ke(s.name,t)}).map(function(s){var o={addresses:[]};if(i.filter(function(a){return(a.type==="SRV"||a.type==="TXT")&&ke(a.name,s.data)}).forEach(function(a){if(a.type==="SRV"){var l=a.name.split("."),c=l[0],f=$s.parse(l.slice(1,-1).join("."));o.name=c,o.fqdn=a.name,o.host=a.data.target,o.referer=n,o.port=a.data.port,o.type=f.name,o.protocol=f.protocol,o.subtypes=f.subtypes}else a.type==="TXT"&&(o.rawTxt=a.data,o.txt=r.decode(a.data))}),!!o.name)return i.filter(function(a){return(a.type==="A"||a.type==="AAAA")&&ke(a.name,o.host)}).forEach(function(a){o.addresses.push(a.data)}),o}).filter(function(s){return!!s})}});var _r=d((Md,Ys)=>{"use strict";var cl=pn(),ul=qs(),Hs=Gs();Ys.exports=J;function J(t){if(!(this instanceof J))return new J(t);this._server=new ul(t),this._registry=new cl(this._server)}J.prototype.publish=function(t){return this._registry.publish(t)};J.prototype.unpublishAll=function(t){this._registry.unpublishAll(t)};J.prototype.find=function(t,e){return new Hs(this._server.mdns,t,e)};J.prototype.findOne=function(t,e){var r=new Hs(this._server.mdns,t);return r.once("up",function(n){r.stop(),e&&e(n)}),r};J.prototype.destroy=function(){this._registry.destroy(),this._server.mdns.destroy()}});var Ks=d(($d,zs)=>{"use strict";var{Duplex:ll}=require("stream");function Vs(t){t.emit("close")}function fl(){!this.destroyed&&this._writableState.finished&&this.destroy()}function Xs(t){this.removeListener("error",Xs),this.destroy(),this.listenerCount("error")===0&&this.emit("error",t)}function dl(t,e){let r=!0,n=new ll({...e,autoDestroy:!1,emitClose:!1,objectMode:!1,writableObjectMode:!1});return t.on("message",function(s,o){let a=!o&&n._readableState.objectMode?s.toString():s;n.push(a)||t.pause()}),t.once("error",function(s){n.destroyed||(r=!1,n.destroy(s))}),t.once("close",function(){n.destroyed||n.push(null)}),n._destroy=function(i,s){if(t.readyState===t.CLOSED){s(i),process.nextTick(Vs,n);return}let o=!1;t.once("error",function(l){o=!0,s(l)}),t.once("close",function(){o||s(i),process.nextTick(Vs,n)}),r&&t.terminate()},n._final=function(i){if(t.readyState===t.CONNECTING){t.once("open",function(){n._final(i)});return}t._socket!==null&&(t._socket._writableState.finished?(i(),n._readableState.endEmitted&&n.destroy()):(t._socket.once("finish",function(){i()}),t.close()))},n._read=function(){t.isPaused&&t.resume()},n._write=function(i,s,o){if(t.readyState===t.CONNECTING){t.once("open",function(){n._write(i,s,o)});return}t.send(i,o)},n.on("end",fl),n.on("error",Xs),n}zs.exports=dl});var ee=d((jd,Qs)=>{"use strict";Qs.exports={BINARY_TYPES:["nodebuffer","arraybuffer","fragments"],EMPTY_BUFFER:Buffer.alloc(0),GUID:"258EAFA5-E914-47DA-95CA-C5AB0DC85B11",kForOnEventAttribute:Symbol("kIsForOnEventAttribute"),kListener:Symbol("kListener"),kStatusCode:Symbol("status-code"),kWebSocket:Symbol("websocket"),NOOP:()=>{}}});var Ue=d((Wd,Et)=>{"use strict";var{EMPTY_BUFFER:hl}=ee(),Sr=Buffer[Symbol.species];function pl(t,e){if(t.length===0)return hl;if(t.length===1)return t[0];let r=Buffer.allocUnsafe(e),n=0;for(let i=0;i<t.length;i++){let s=t[i];r.set(s,n),n+=s.length}return n<e?new Sr(r.buffer,r.byteOffset,n):r}function Zs(t,e,r,n,i){for(let s=0;s<i;s++)r[n+s]=t[s]^e[s&3]}function Js(t,e){for(let r=0;r<t.length;r++)t[r]^=e[r&3]}function yl(t){return t.length===t.buffer.byteLength?t.buffer:t.buffer.slice(t.byteOffset,t.byteOffset+t.length)}function Er(t){if(Er.readOnly=!0,Buffer.isBuffer(t))return t;let e;return t instanceof ArrayBuffer?e=new Sr(t):ArrayBuffer.isView(t)?e=new Sr(t.buffer,t.byteOffset,t.byteLength):(e=Buffer.from(t),Er.readOnly=!1),e}Et.exports={concat:pl,mask:Zs,toArrayBuffer:yl,toBuffer:Er,unmask:Js};if(!process.env.WS_NO_BUFFER_UTIL)try{let t=require("bufferutil");Et.exports.mask=function(e,r,n,i,s){s<48?Zs(e,r,n,i,s):t.mask(e,r,n,i,s)},Et.exports.unmask=function(e,r){e.length<32?Js(e,r):t.unmask(e,r)}}catch{}});var ro=d((Gd,to)=>{"use strict";var eo=Symbol("kDone"),xr=Symbol("kRun"),br=class{constructor(e){this[eo]=()=>{this.pending--,this[xr]()},this.concurrency=e||1/0,this.jobs=[],this.pending=0}add(e){this.jobs.push(e),this[xr]()}[xr](){if(this.pending!==this.concurrency&&this.jobs.length){let e=this.jobs.shift();this.pending++,e(this[eo])}}};to.exports=br});var Fe=d((Hd,oo)=>{"use strict";var Be=require("zlib"),no=Ue(),gl=ro(),{kStatusCode:io}=ee(),vl=Buffer[Symbol.species],ml=Buffer.from([0,0,255,255]),wt=Symbol("permessage-deflate"),V=Symbol("total-length"),De=Symbol("callback"),te=Symbol("buffers"),bt=Symbol("error"),xt,wr=class{constructor(e,r,n){if(this._maxPayload=n|0,this._options=e||{},this._threshold=this._options.threshold!==void 0?this._options.threshold:1024,this._isServer=!!r,this._deflate=null,this._inflate=null,this.params=null,!xt){let i=this._options.concurrencyLimit!==void 0?this._options.concurrencyLimit:10;xt=new gl(i)}}static get extensionName(){return"permessage-deflate"}offer(){let e={};return this._options.serverNoContextTakeover&&(e.server_no_context_takeover=!0),this._options.clientNoContextTakeover&&(e.client_no_context_takeover=!0),this._options.serverMaxWindowBits&&(e.server_max_window_bits=this._options.serverMaxWindowBits),this._options.clientMaxWindowBits?e.client_max_window_bits=this._options.clientMaxWindowBits:this._options.clientMaxWindowBits==null&&(e.client_max_window_bits=!0),e}accept(e){return e=this.normalizeParams(e),this.params=this._isServer?this.acceptAsServer(e):this.acceptAsClient(e),this.params}cleanup(){if(this._inflate&&(this._inflate.close(),this._inflate=null),this._deflate){let e=this._deflate[De];this._deflate.close(),this._deflate=null,e&&e(new Error("The deflate stream was closed while data was being processed"))}}acceptAsServer(e){let r=this._options,n=e.find(i=>!(r.serverNoContextTakeover===!1&&i.server_no_context_takeover||i.server_max_window_bits&&(r.serverMaxWindowBits===!1||typeof r.serverMaxWindowBits=="number"&&r.serverMaxWindowBits>i.server_max_window_bits)||typeof r.clientMaxWindowBits=="number"&&!i.client_max_window_bits));if(!n)throw new Error("None of the extension offers can be accepted");return r.serverNoContextTakeover&&(n.server_no_context_takeover=!0),r.clientNoContextTakeover&&(n.client_no_context_takeover=!0),typeof r.serverMaxWindowBits=="number"&&(n.server_max_window_bits=r.serverMaxWindowBits),typeof r.clientMaxWindowBits=="number"?n.client_max_window_bits=r.clientMaxWindowBits:(n.client_max_window_bits===!0||r.clientMaxWindowBits===!1)&&delete n.client_max_window_bits,n}acceptAsClient(e){let r=e[0];if(this._options.clientNoContextTakeover===!1&&r.client_no_context_takeover)throw new Error('Unexpected parameter "client_no_context_takeover"');if(!r.client_max_window_bits)typeof this._options.clientMaxWindowBits=="number"&&(r.client_max_window_bits=this._options.clientMaxWindowBits);else if(this._options.clientMaxWindowBits===!1||typeof this._options.clientMaxWindowBits=="number"&&r.client_max_window_bits>this._options.clientMaxWindowBits)throw new Error('Unexpected or invalid parameter "client_max_window_bits"');return r}normalizeParams(e){return e.forEach(r=>{Object.keys(r).forEach(n=>{let i=r[n];if(i.length>1)throw new Error(`Parameter "${n}" must have only a single value`);if(i=i[0],n==="client_max_window_bits"){if(i!==!0){let s=+i;if(!Number.isInteger(s)||s<8||s>15)throw new TypeError(`Invalid value for parameter "${n}": ${i}`);i=s}else if(!this._isServer)throw new TypeError(`Invalid value for parameter "${n}": ${i}`)}else if(n==="server_max_window_bits"){let s=+i;if(!Number.isInteger(s)||s<8||s>15)throw new TypeError(`Invalid value for parameter "${n}": ${i}`);i=s}else if(n==="client_no_context_takeover"||n==="server_no_context_takeover"){if(i!==!0)throw new TypeError(`Invalid value for parameter "${n}": ${i}`)}else throw new Error(`Unknown parameter "${n}"`);r[n]=i})}),e}decompress(e,r,n){xt.add(i=>{this._decompress(e,r,(s,o)=>{i(),n(s,o)})})}compress(e,r,n){xt.add(i=>{this._compress(e,r,(s,o)=>{i(),n(s,o)})})}_decompress(e,r,n){let i=this._isServer?"client":"server";if(!this._inflate){let s=`${i}_max_window_bits`,o=typeof this.params[s]!="number"?Be.Z_DEFAULT_WINDOWBITS:this.params[s];this._inflate=Be.createInflateRaw({...this._options.zlibInflateOptions,windowBits:o}),this._inflate[wt]=this,this._inflate[V]=0,this._inflate[te]=[],this._inflate.on("error",Sl),this._inflate.on("data",so)}this._inflate[De]=n,this._inflate.write(e),r&&this._inflate.write(ml),this._inflate.flush(()=>{let s=this._inflate[bt];if(s){this._inflate.close(),this._inflate=null,n(s);return}let o=no.concat(this._inflate[te],this._inflate[V]);this._inflate._readableState.endEmitted?(this._inflate.close(),this._inflate=null):(this._inflate[V]=0,this._inflate[te]=[],r&&this.params[`${i}_no_context_takeover`]&&this._inflate.reset()),n(null,o)})}_compress(e,r,n){let i=this._isServer?"server":"client";if(!this._deflate){let s=`${i}_max_window_bits`,o=typeof this.params[s]!="number"?Be.Z_DEFAULT_WINDOWBITS:this.params[s];this._deflate=Be.createDeflateRaw({...this._options.zlibDeflateOptions,windowBits:o}),this._deflate[V]=0,this._deflate[te]=[],this._deflate.on("data",_l)}this._deflate[De]=n,this._deflate.write(e),this._deflate.flush(Be.Z_SYNC_FLUSH,()=>{if(!this._deflate)return;let s=no.concat(this._deflate[te],this._deflate[V]);r&&(s=new vl(s.buffer,s.byteOffset,s.length-4)),this._deflate[De]=null,this._deflate[V]=0,this._deflate[te]=[],r&&this.params[`${i}_no_context_takeover`]&&this._deflate.reset(),n(null,s)})}};oo.exports=wr;function _l(t){this[te].push(t),this[V]+=t.length}function so(t){if(this[V]+=t.length,this[wt]._maxPayload<1||this[V]<=this[wt]._maxPayload){this[te].push(t);return}this[bt]=new RangeError("Max payload size exceeded"),this[bt].code="WS_ERR_UNSUPPORTED_MESSAGE_LENGTH",this[bt][io]=1009,this.removeListener("data",so),this.reset()}function Sl(t){this[wt]._inflate=null,t[io]=1007,this[De](t)}});var qe=d((Yd,Ot)=>{"use strict";var{isUtf8:ao}=require("buffer"),El=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,1,1,1,1,0,0,1,1,0,1,1,0,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,0,1,0];function xl(t){return t>=1e3&&t<=1014&&t!==1004&&t!==1005&&t!==1006||t>=3e3&&t<=4999}function Or(t){let e=t.length,r=0;for(;r<e;)if(!(t[r]&128))r++;else if((t[r]&224)===192){if(r+1===e||(t[r+1]&192)!==128||(t[r]&254)===192)return!1;r+=2}else if((t[r]&240)===224){if(r+2>=e||(t[r+1]&192)!==128||(t[r+2]&192)!==128||t[r]===224&&(t[r+1]&224)===128||t[r]===237&&(t[r+1]&224)===160)return!1;r+=3}else if((t[r]&248)===240){if(r+3>=e||(t[r+1]&192)!==128||(t[r+2]&192)!==128||(t[r+3]&192)!==128||t[r]===240&&(t[r+1]&240)===128||t[r]===244&&t[r+1]>143||t[r]>244)return!1;r+=4}else return!1;return!0}Ot.exports={isValidStatusCode:xl,isValidUTF8:Or,tokenChars:El};if(ao)Ot.exports.isValidUTF8=function(t){return t.length<24?Or(t):ao(t)};else if(!process.env.WS_NO_UTF_8_VALIDATE)try{let t=require("utf-8-validate");Ot.exports.isValidUTF8=function(e){return e.length<32?Or(e):t(e)}}catch{}});var Ir=d((Vd,yo)=>{"use strict";var{Writable:bl}=require("stream"),co=Fe(),{BINARY_TYPES:wl,EMPTY_BUFFER:uo,kStatusCode:Ol,kWebSocket:Al}=ee(),{concat:Ar,toArrayBuffer:Tl,unmask:Pl}=Ue(),{isValidStatusCode:Cl,isValidUTF8:lo}=qe(),At=Buffer[Symbol.species],Il=Promise.resolve(),Tr=typeof queueMicrotask=="function"?queueMicrotask:Rl,L=0,fo=1,ho=2,po=3,Pr=4,Tt=5,Pt=6,Cr=class extends bl{constructor(e={}){super(),this._allowSynchronousEvents=!!e.allowSynchronousEvents,this._binaryType=e.binaryType||wl[0],this._extensions=e.extensions||{},this._isServer=!!e.isServer,this._maxPayload=e.maxPayload|0,this._skipUTF8Validation=!!e.skipUTF8Validation,this[Al]=void 0,this._bufferedBytes=0,this._buffers=[],this._compressed=!1,this._payloadLength=0,this._mask=void 0,this._fragmented=0,this._masked=!1,this._fin=!1,this._opcode=0,this._totalPayloadLength=0,this._messageLength=0,this._fragments=[],this._errored=!1,this._loop=!1,this._state=L}_write(e,r,n){if(this._opcode===8&&this._state==L)return n();this._bufferedBytes+=e.length,this._buffers.push(e),this.startLoop(n)}consume(e){if(this._bufferedBytes-=e,e===this._buffers[0].length)return this._buffers.shift();if(e<this._buffers[0].length){let n=this._buffers[0];return this._buffers[0]=new At(n.buffer,n.byteOffset+e,n.length-e),new At(n.buffer,n.byteOffset,e)}let r=Buffer.allocUnsafe(e);do{let n=this._buffers[0],i=r.length-e;e>=n.length?r.set(this._buffers.shift(),i):(r.set(new Uint8Array(n.buffer,n.byteOffset,e),i),this._buffers[0]=new At(n.buffer,n.byteOffset+e,n.length-e)),e-=n.length}while(e>0);return r}startLoop(e){this._loop=!0;do switch(this._state){case L:this.getInfo(e);break;case fo:this.getPayloadLength16(e);break;case ho:this.getPayloadLength64(e);break;case po:this.getMask();break;case Pr:this.getData(e);break;case Tt:case Pt:this._loop=!1;return}while(this._loop);this._errored||e()}getInfo(e){if(this._bufferedBytes<2){this._loop=!1;return}let r=this.consume(2);if(r[0]&48){let i=this.createError(RangeError,"RSV2 and RSV3 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_2_3");e(i);return}let n=(r[0]&64)===64;if(n&&!this._extensions[co.extensionName]){let i=this.createError(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1");e(i);return}if(this._fin=(r[0]&128)===128,this._opcode=r[0]&15,this._payloadLength=r[1]&127,this._opcode===0){if(n){let i=this.createError(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1");e(i);return}if(!this._fragmented){let i=this.createError(RangeError,"invalid opcode 0",!0,1002,"WS_ERR_INVALID_OPCODE");e(i);return}this._opcode=this._fragmented}else if(this._opcode===1||this._opcode===2){if(this._fragmented){let i=this.createError(RangeError,`invalid opcode ${this._opcode}`,!0,1002,"WS_ERR_INVALID_OPCODE");e(i);return}this._compressed=n}else if(this._opcode>7&&this._opcode<11){if(!this._fin){let i=this.createError(RangeError,"FIN must be set",!0,1002,"WS_ERR_EXPECTED_FIN");e(i);return}if(n){let i=this.createError(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1");e(i);return}if(this._payloadLength>125||this._opcode===8&&this._payloadLength===1){let i=this.createError(RangeError,`invalid payload length ${this._payloadLength}`,!0,1002,"WS_ERR_INVALID_CONTROL_PAYLOAD_LENGTH");e(i);return}}else{let i=this.createError(RangeError,`invalid opcode ${this._opcode}`,!0,1002,"WS_ERR_INVALID_OPCODE");e(i);return}if(!this._fin&&!this._fragmented&&(this._fragmented=this._opcode),this._masked=(r[1]&128)===128,this._isServer){if(!this._masked){let i=this.createError(RangeError,"MASK must be set",!0,1002,"WS_ERR_EXPECTED_MASK");e(i);return}}else if(this._masked){let i=this.createError(RangeError,"MASK must be clear",!0,1002,"WS_ERR_UNEXPECTED_MASK");e(i);return}this._payloadLength===126?this._state=fo:this._payloadLength===127?this._state=ho:this.haveLength(e)}getPayloadLength16(e){if(this._bufferedBytes<2){this._loop=!1;return}this._payloadLength=this.consume(2).readUInt16BE(0),this.haveLength(e)}getPayloadLength64(e){if(this._bufferedBytes<8){this._loop=!1;return}let r=this.consume(8),n=r.readUInt32BE(0);if(n>Math.pow(2,21)-1){let i=this.createError(RangeError,"Unsupported WebSocket frame: payload length > 2^53 - 1",!1,1009,"WS_ERR_UNSUPPORTED_DATA_PAYLOAD_LENGTH");e(i);return}this._payloadLength=n*Math.pow(2,32)+r.readUInt32BE(4),this.haveLength(e)}haveLength(e){if(this._payloadLength&&this._opcode<8&&(this._totalPayloadLength+=this._payloadLength,this._totalPayloadLength>this._maxPayload&&this._maxPayload>0)){let r=this.createError(RangeError,"Max payload size exceeded",!1,1009,"WS_ERR_UNSUPPORTED_MESSAGE_LENGTH");e(r);return}this._masked?this._state=po:this._state=Pr}getMask(){if(this._bufferedBytes<4){this._loop=!1;return}this._mask=this.consume(4),this._state=Pr}getData(e){let r=uo;if(this._payloadLength){if(this._bufferedBytes<this._payloadLength){this._loop=!1;return}r=this.consume(this._payloadLength),this._masked&&this._mask[0]|this._mask[1]|this._mask[2]|this._mask[3]&&Pl(r,this._mask)}if(this._opcode>7){this.controlMessage(r,e);return}if(this._compressed){this._state=Tt,this.decompress(r,e);return}r.length&&(this._messageLength=this._totalPayloadLength,this._fragments.push(r)),this.dataMessage(e)}decompress(e,r){this._extensions[co.extensionName].decompress(e,this._fin,(i,s)=>{if(i)return r(i);if(s.length){if(this._messageLength+=s.length,this._messageLength>this._maxPayload&&this._maxPayload>0){let o=this.createError(RangeError,"Max payload size exceeded",!1,1009,"WS_ERR_UNSUPPORTED_MESSAGE_LENGTH");r(o);return}this._fragments.push(s)}this.dataMessage(r),this._state===L&&this.startLoop(r)})}dataMessage(e){if(!this._fin){this._state=L;return}let r=this._messageLength,n=this._fragments;if(this._totalPayloadLength=0,this._messageLength=0,this._fragmented=0,this._fragments=[],this._opcode===2){let i;this._binaryType==="nodebuffer"?i=Ar(n,r):this._binaryType==="arraybuffer"?i=Tl(Ar(n,r)):i=n,this._state===Tt||this._allowSynchronousEvents?(this.emit("message",i,!0),this._state=L):(this._state=Pt,Tr(()=>{this.emit("message",i,!0),this._state=L,this.startLoop(e)}))}else{let i=Ar(n,r);if(!this._skipUTF8Validation&&!lo(i)){let s=this.createError(Error,"invalid UTF-8 sequence",!0,1007,"WS_ERR_INVALID_UTF8");e(s);return}this._state===Tt||this._allowSynchronousEvents?(this.emit("message",i,!1),this._state=L):(this._state=Pt,Tr(()=>{this.emit("message",i,!1),this._state=L,this.startLoop(e)}))}}controlMessage(e,r){if(this._opcode===8){if(e.length===0)this._loop=!1,this.emit("conclude",1005,uo),this.end();else{let n=e.readUInt16BE(0);if(!Cl(n)){let s=this.createError(RangeError,`invalid status code ${n}`,!0,1002,"WS_ERR_INVALID_CLOSE_CODE");r(s);return}let i=new At(e.buffer,e.byteOffset+2,e.length-2);if(!this._skipUTF8Validation&&!lo(i)){let s=this.createError(Error,"invalid UTF-8 sequence",!0,1007,"WS_ERR_INVALID_UTF8");r(s);return}this._loop=!1,this.emit("conclude",n,i),this.end()}this._state=L;return}this._allowSynchronousEvents?(this.emit(this._opcode===9?"ping":"pong",e),this._state=L):(this._state=Pt,Tr(()=>{this.emit(this._opcode===9?"ping":"pong",e),this._state=L,this.startLoop(r)}))}createError(e,r,n,i,s){this._loop=!1,this._errored=!0;let o=new e(n?`Invalid WebSocket frame: ${r}`:r);return Error.captureStackTrace(o,this.createError),o.code=s,o[Ol]=i,o}};yo.exports=Cr;function Rl(t){Il.then(t).catch(Nl)}function Ll(t){throw t}function Nl(t){process.nextTick(Ll,t)}});var Lr=d((zd,mo)=>{"use strict";var{Duplex:Xd}=require("stream"),{randomFillSync:kl}=require("crypto"),go=Fe(),{EMPTY_BUFFER:Ul}=ee(),{isValidStatusCode:Bl}=qe(),{mask:vo,toBuffer:Ee}=Ue(),B=Symbol("kByteLength"),Dl=Buffer.alloc(4),Rr=class t{constructor(e,r,n){this._extensions=r||{},n&&(this._generateMask=n,this._maskBuffer=Buffer.alloc(4)),this._socket=e,this._firstFragment=!0,this._compress=!1,this._bufferedBytes=0,this._deflating=!1,this._queue=[]}static frame(e,r){let n,i=!1,s=2,o=!1;r.mask&&(n=r.maskBuffer||Dl,r.generateMask?r.generateMask(n):kl(n,0,4),o=(n[0]|n[1]|n[2]|n[3])===0,s=6);let a;typeof e=="string"?(!r.mask||o)&&r[B]!==void 0?a=r[B]:(e=Buffer.from(e),a=e.length):(a=e.length,i=r.mask&&r.readOnly&&!o);let l=a;a>=65536?(s+=8,l=127):a>125&&(s+=2,l=126);let c=Buffer.allocUnsafe(i?a+s:s);return c[0]=r.fin?r.opcode|128:r.opcode,r.rsv1&&(c[0]|=64),c[1]=l,l===126?c.writeUInt16BE(a,2):l===127&&(c[2]=c[3]=0,c.writeUIntBE(a,4,6)),r.mask?(c[1]|=128,c[s-4]=n[0],c[s-3]=n[1],c[s-2]=n[2],c[s-1]=n[3],o?[c,e]:i?(vo(e,n,c,s,a),[c]):(vo(e,n,e,0,a),[c,e])):[c,e]}close(e,r,n,i){let s;if(e===void 0)s=Ul;else{if(typeof e!="number"||!Bl(e))throw new TypeError("First argument must be a valid error code number");if(r===void 0||!r.length)s=Buffer.allocUnsafe(2),s.writeUInt16BE(e,0);else{let a=Buffer.byteLength(r);if(a>123)throw new RangeError("The message must not be greater than 123 bytes");s=Buffer.allocUnsafe(2+a),s.writeUInt16BE(e,0),typeof r=="string"?s.write(r,2):s.set(r,2)}}let o={[B]:s.length,fin:!0,generateMask:this._generateMask,mask:n,maskBuffer:this._maskBuffer,opcode:8,readOnly:!1,rsv1:!1};this._deflating?this.enqueue([this.dispatch,s,!1,o,i]):this.sendFrame(t.frame(s,o),i)}ping(e,r,n){let i,s;if(typeof e=="string"?(i=Buffer.byteLength(e),s=!1):(e=Ee(e),i=e.length,s=Ee.readOnly),i>125)throw new RangeError("The data size must not be greater than 125 bytes");let o={[B]:i,fin:!0,generateMask:this._generateMask,mask:r,maskBuffer:this._maskBuffer,opcode:9,readOnly:s,rsv1:!1};this._deflating?this.enqueue([this.dispatch,e,!1,o,n]):this.sendFrame(t.frame(e,o),n)}pong(e,r,n){let i,s;if(typeof e=="string"?(i=Buffer.byteLength(e),s=!1):(e=Ee(e),i=e.length,s=Ee.readOnly),i>125)throw new RangeError("The data size must not be greater than 125 bytes");let o={[B]:i,fin:!0,generateMask:this._generateMask,mask:r,maskBuffer:this._maskBuffer,opcode:10,readOnly:s,rsv1:!1};this._deflating?this.enqueue([this.dispatch,e,!1,o,n]):this.sendFrame(t.frame(e,o),n)}send(e,r,n){let i=this._extensions[go.extensionName],s=r.binary?2:1,o=r.compress,a,l;if(typeof e=="string"?(a=Buffer.byteLength(e),l=!1):(e=Ee(e),a=e.length,l=Ee.readOnly),this._firstFragment?(this._firstFragment=!1,o&&i&&i.params[i._isServer?"server_no_context_takeover":"client_no_context_takeover"]&&(o=a>=i._threshold),this._compress=o):(o=!1,s=0),r.fin&&(this._firstFragment=!0),i){let c={[B]:a,fin:r.fin,generateMask:this._generateMask,mask:r.mask,maskBuffer:this._maskBuffer,opcode:s,readOnly:l,rsv1:o};this._deflating?this.enqueue([this.dispatch,e,this._compress,c,n]):this.dispatch(e,this._compress,c,n)}else this.sendFrame(t.frame(e,{[B]:a,fin:r.fin,generateMask:this._generateMask,mask:r.mask,maskBuffer:this._maskBuffer,opcode:s,readOnly:l,rsv1:!1}),n)}dispatch(e,r,n,i){if(!r){this.sendFrame(t.frame(e,n),i);return}let s=this._extensions[go.extensionName];this._bufferedBytes+=n[B],this._deflating=!0,s.compress(e,n.fin,(o,a)=>{if(this._socket.destroyed){let l=new Error("The socket was closed while data was being compressed");typeof i=="function"&&i(l);for(let c=0;c<this._queue.length;c++){let f=this._queue[c],u=f[f.length-1];typeof u=="function"&&u(l)}return}this._bufferedBytes-=n[B],this._deflating=!1,n.readOnly=!1,this.sendFrame(t.frame(a,n),i),this.dequeue()})}dequeue(){for(;!this._deflating&&this._queue.length;){let e=this._queue.shift();this._bufferedBytes-=e[3][B],Reflect.apply(e[0],this,e.slice(1))}}enqueue(e){this._bufferedBytes+=e[3][B],this._queue.push(e)}sendFrame(e,r){e.length===2?(this._socket.cork(),this._socket.write(e[0]),this._socket.write(e[1],r),this._socket.uncork()):this._socket.write(e[0],r)}};mo.exports=Rr});var To=d((Kd,Ao)=>{"use strict";var{kForOnEventAttribute:Me,kListener:Nr}=ee(),_o=Symbol("kCode"),So=Symbol("kData"),Eo=Symbol("kError"),xo=Symbol("kMessage"),bo=Symbol("kReason"),xe=Symbol("kTarget"),wo=Symbol("kType"),Oo=Symbol("kWasClean"),X=class{constructor(e){this[xe]=null,this[wo]=e}get target(){return this[xe]}get type(){return this[wo]}};Object.defineProperty(X.prototype,"target",{enumerable:!0});Object.defineProperty(X.prototype,"type",{enumerable:!0});var ae=class extends X{constructor(e,r={}){super(e),this[_o]=r.code===void 0?0:r.code,this[bo]=r.reason===void 0?"":r.reason,this[Oo]=r.wasClean===void 0?!1:r.wasClean}get code(){return this[_o]}get reason(){return this[bo]}get wasClean(){return this[Oo]}};Object.defineProperty(ae.prototype,"code",{enumerable:!0});Object.defineProperty(ae.prototype,"reason",{enumerable:!0});Object.defineProperty(ae.prototype,"wasClean",{enumerable:!0});var be=class extends X{constructor(e,r={}){super(e),this[Eo]=r.error===void 0?null:r.error,this[xo]=r.message===void 0?"":r.message}get error(){return this[Eo]}get message(){return this[xo]}};Object.defineProperty(be.prototype,"error",{enumerable:!0});Object.defineProperty(be.prototype,"message",{enumerable:!0});var $e=class extends X{constructor(e,r={}){super(e),this[So]=r.data===void 0?null:r.data}get data(){return this[So]}};Object.defineProperty($e.prototype,"data",{enumerable:!0});var Fl={addEventListener(t,e,r={}){for(let i of this.listeners(t))if(!r[Me]&&i[Nr]===e&&!i[Me])return;let n;if(t==="message")n=function(s,o){let a=new $e("message",{data:o?s:s.toString()});a[xe]=this,Ct(e,this,a)};else if(t==="close")n=function(s,o){let a=new ae("close",{code:s,reason:o.toString(),wasClean:this._closeFrameReceived&&this._closeFrameSent});a[xe]=this,Ct(e,this,a)};else if(t==="error")n=function(s){let o=new be("error",{error:s,message:s.message});o[xe]=this,Ct(e,this,o)};else if(t==="open")n=function(){let s=new X("open");s[xe]=this,Ct(e,this,s)};else return;n[Me]=!!r[Me],n[Nr]=e,r.once?this.once(t,n):this.on(t,n)},removeEventListener(t,e){for(let r of this.listeners(t))if(r[Nr]===e&&!r[Me]){this.removeListener(t,r);break}}};Ao.exports={CloseEvent:ae,ErrorEvent:be,Event:X,EventTarget:Fl,MessageEvent:$e};function Ct(t,e,r){typeof t=="object"&&t.handleEvent?t.handleEvent.call(t,r):t.call(e,r)}});var kr=d((Qd,Po)=>{"use strict";var{tokenChars:je}=qe();function F(t,e,r){t[e]===void 0?t[e]=[r]:t[e].push(r)}function ql(t){let e=Object.create(null),r=Object.create(null),n=!1,i=!1,s=!1,o,a,l=-1,c=-1,f=-1,u=0;for(;u<t.length;u++)if(c=t.charCodeAt(u),o===void 0)if(f===-1&&je[c]===1)l===-1&&(l=u);else if(u!==0&&(c===32||c===9))f===-1&&l!==-1&&(f=u);else if(c===59||c===44){if(l===-1)throw new SyntaxError(`Unexpected character at index ${u}`);f===-1&&(f=u);let v=t.slice(l,f);c===44?(F(e,v,r),r=Object.create(null)):o=v,l=f=-1}else throw new SyntaxError(`Unexpected character at index ${u}`);else if(a===void 0)if(f===-1&&je[c]===1)l===-1&&(l=u);else if(c===32||c===9)f===-1&&l!==-1&&(f=u);else if(c===59||c===44){if(l===-1)throw new SyntaxError(`Unexpected character at index ${u}`);f===-1&&(f=u),F(r,t.slice(l,f),!0),c===44&&(F(e,o,r),r=Object.create(null),o=void 0),l=f=-1}else if(c===61&&l!==-1&&f===-1)a=t.slice(l,u),l=f=-1;else throw new SyntaxError(`Unexpected character at index ${u}`);else if(i){if(je[c]!==1)throw new SyntaxError(`Unexpected character at index ${u}`);l===-1?l=u:n||(n=!0),i=!1}else if(s)if(je[c]===1)l===-1&&(l=u);else if(c===34&&l!==-1)s=!1,f=u;else if(c===92)i=!0;else throw new SyntaxError(`Unexpected character at index ${u}`);else if(c===34&&t.charCodeAt(u-1)===61)s=!0;else if(f===-1&&je[c]===1)l===-1&&(l=u);else if(l!==-1&&(c===32||c===9))f===-1&&(f=u);else if(c===59||c===44){if(l===-1)throw new SyntaxError(`Unexpected character at index ${u}`);f===-1&&(f=u);let v=t.slice(l,f);n&&(v=v.replace(/\\/g,""),n=!1),F(r,a,v),c===44&&(F(e,o,r),r=Object.create(null),o=void 0),a=void 0,l=f=-1}else throw new SyntaxError(`Unexpected character at index ${u}`);if(l===-1||s||c===32||c===9)throw new SyntaxError("Unexpected end of input");f===-1&&(f=u);let h=t.slice(l,f);return o===void 0?F(e,h,r):(a===void 0?F(r,h,!0):n?F(r,a,h.replace(/\\/g,"")):F(r,a,h),F(e,o,r)),e}function Ml(t){return Object.keys(t).map(e=>{let r=t[e];return Array.isArray(r)||(r=[r]),r.map(n=>[e].concat(Object.keys(n).map(i=>{let s=n[i];return Array.isArray(s)||(s=[s]),s.map(o=>o===!0?i:`${i}=${o}`).join("; ")})).join("; ")).join(", ")}).join(", ")}Po.exports={format:Ml,parse:ql}});var qr=d((eh,qo)=>{"use strict";var $l=require("events"),jl=require("https"),Wl=require("http"),Ro=require("net"),Gl=require("tls"),{randomBytes:Hl,createHash:Yl}=require("crypto"),{Duplex:Zd,Readable:Jd}=require("stream"),{URL:Ur}=require("url"),re=Fe(),Vl=Ir(),Xl=Lr(),{BINARY_TYPES:Co,EMPTY_BUFFER:It,GUID:zl,kForOnEventAttribute:Br,kListener:Kl,kStatusCode:Ql,kWebSocket:C,NOOP:Lo}=ee(),{EventTarget:{addEventListener:Zl,removeEventListener:Jl}}=To(),{format:ef,parse:tf}=kr(),{toBuffer:rf}=Ue(),nf=30*1e3,No=Symbol("kAborted"),Dr=[8,13],z=["CONNECTING","OPEN","CLOSING","CLOSED"],sf=/^[!#$%&'*+\-.0-9A-Z^_`|a-z~]+$/,b=class t extends $l{constructor(e,r,n){super(),this._binaryType=Co[0],this._closeCode=1006,this._closeFrameReceived=!1,this._closeFrameSent=!1,this._closeMessage=It,this._closeTimer=null,this._extensions={},this._paused=!1,this._protocol="",this._readyState=t.CONNECTING,this._receiver=null,this._sender=null,this._socket=null,e!==null?(this._bufferedAmount=0,this._isServer=!1,this._redirects=0,r===void 0?r=[]:Array.isArray(r)||(typeof r=="object"&&r!==null?(n=r,r=[]):r=[r]),ko(this,e,r,n)):(this._autoPong=n.autoPong,this._isServer=!0)}get binaryType(){return this._binaryType}set binaryType(e){Co.includes(e)&&(this._binaryType=e,this._receiver&&(this._receiver._binaryType=e))}get bufferedAmount(){return this._socket?this._socket._writableState.length+this._sender._bufferedBytes:this._bufferedAmount}get extensions(){return Object.keys(this._extensions).join()}get isPaused(){return this._paused}get onclose(){return null}get onerror(){return null}get onopen(){return null}get onmessage(){return null}get protocol(){return this._protocol}get readyState(){return this._readyState}get url(){return this._url}setSocket(e,r,n){let i=new Vl({allowSynchronousEvents:n.allowSynchronousEvents,binaryType:this.binaryType,extensions:this._extensions,isServer:this._isServer,maxPayload:n.maxPayload,skipUTF8Validation:n.skipUTF8Validation});this._sender=new Xl(e,this._extensions,n.generateMask),this._receiver=i,this._socket=e,i[C]=this,e[C]=this,i.on("conclude",cf),i.on("drain",uf),i.on("error",lf),i.on("message",ff),i.on("ping",df),i.on("pong",hf),e.setTimeout&&e.setTimeout(0),e.setNoDelay&&e.setNoDelay(),r.length>0&&e.unshift(r),e.on("close",Bo),e.on("data",Lt),e.on("end",Do),e.on("error",Fo),this._readyState=t.OPEN,this.emit("open")}emitClose(){if(!this._socket){this._readyState=t.CLOSED,this.emit("close",this._closeCode,this._closeMessage);return}this._extensions[re.extensionName]&&this._extensions[re.extensionName].cleanup(),this._receiver.removeAllListeners(),this._readyState=t.CLOSED,this.emit("close",this._closeCode,this._closeMessage)}close(e,r){if(this.readyState!==t.CLOSED){if(this.readyState===t.CONNECTING){R(this,this._req,"WebSocket was closed before the connection was established");return}if(this.readyState===t.CLOSING){this._closeFrameSent&&(this._closeFrameReceived||this._receiver._writableState.errorEmitted)&&this._socket.end();return}this._readyState=t.CLOSING,this._sender.close(e,r,!this._isServer,n=>{n||(this._closeFrameSent=!0,(this._closeFrameReceived||this._receiver._writableState.errorEmitted)&&this._socket.end())}),this._closeTimer=setTimeout(this._socket.destroy.bind(this._socket),nf)}}pause(){this.readyState===t.CONNECTING||this.readyState===t.CLOSED||(this._paused=!0,this._socket.pause())}ping(e,r,n){if(this.readyState===t.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");if(typeof e=="function"?(n=e,e=r=void 0):typeof r=="function"&&(n=r,r=void 0),typeof e=="number"&&(e=e.toString()),this.readyState!==t.OPEN){Fr(this,e,n);return}r===void 0&&(r=!this._isServer),this._sender.ping(e||It,r,n)}pong(e,r,n){if(this.readyState===t.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");if(typeof e=="function"?(n=e,e=r=void 0):typeof r=="function"&&(n=r,r=void 0),typeof e=="number"&&(e=e.toString()),this.readyState!==t.OPEN){Fr(this,e,n);return}r===void 0&&(r=!this._isServer),this._sender.pong(e||It,r,n)}resume(){this.readyState===t.CONNECTING||this.readyState===t.CLOSED||(this._paused=!1,this._receiver._writableState.needDrain||this._socket.resume())}send(e,r,n){if(this.readyState===t.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");if(typeof r=="function"&&(n=r,r={}),typeof e=="number"&&(e=e.toString()),this.readyState!==t.OPEN){Fr(this,e,n);return}let i={binary:typeof e!="string",mask:!this._isServer,compress:!0,fin:!0,...r};this._extensions[re.extensionName]||(i.compress=!1),this._sender.send(e||It,i,n)}terminate(){if(this.readyState!==t.CLOSED){if(this.readyState===t.CONNECTING){R(this,this._req,"WebSocket was closed before the connection was established");return}this._socket&&(this._readyState=t.CLOSING,this._socket.destroy())}}};Object.defineProperty(b,"CONNECTING",{enumerable:!0,value:z.indexOf("CONNECTING")});Object.defineProperty(b.prototype,"CONNECTING",{enumerable:!0,value:z.indexOf("CONNECTING")});Object.defineProperty(b,"OPEN",{enumerable:!0,value:z.indexOf("OPEN")});Object.defineProperty(b.prototype,"OPEN",{enumerable:!0,value:z.indexOf("OPEN")});Object.defineProperty(b,"CLOSING",{enumerable:!0,value:z.indexOf("CLOSING")});Object.defineProperty(b.prototype,"CLOSING",{enumerable:!0,value:z.indexOf("CLOSING")});Object.defineProperty(b,"CLOSED",{enumerable:!0,value:z.indexOf("CLOSED")});Object.defineProperty(b.prototype,"CLOSED",{enumerable:!0,value:z.indexOf("CLOSED")});["binaryType","bufferedAmount","extensions","isPaused","protocol","readyState","url"].forEach(t=>{Object.defineProperty(b.prototype,t,{enumerable:!0})});["open","error","close","message"].forEach(t=>{Object.defineProperty(b.prototype,`on${t}`,{enumerable:!0,get(){for(let e of this.listeners(t))if(e[Br])return e[Kl];return null},set(e){for(let r of this.listeners(t))if(r[Br]){this.removeListener(t,r);break}typeof e=="function"&&this.addEventListener(t,e,{[Br]:!0})}})});b.prototype.addEventListener=Zl;b.prototype.removeEventListener=Jl;qo.exports=b;function ko(t,e,r,n){let i={allowSynchronousEvents:!1,autoPong:!0,protocolVersion:Dr[1],maxPayload:104857600,skipUTF8Validation:!1,perMessageDeflate:!0,followRedirects:!1,maxRedirects:10,...n,createConnection:void 0,socketPath:void 0,hostname:void 0,protocol:void 0,timeout:void 0,method:"GET",host:void 0,path:void 0,port:void 0};if(t._autoPong=i.autoPong,!Dr.includes(i.protocolVersion))throw new RangeError(`Unsupported protocol version: ${i.protocolVersion} (supported versions: ${Dr.join(", ")})`);let s;if(e instanceof Ur)s=e;else try{s=new Ur(e)}catch{throw new SyntaxError(`Invalid URL: ${e}`)}s.protocol==="http:"?s.protocol="ws:":s.protocol==="https:"&&(s.protocol="wss:"),t._url=s.href;let o=s.protocol==="wss:",a=s.protocol==="ws+unix:",l;if(s.protocol!=="ws:"&&!o&&!a?l=`The URL's protocol must be one of "ws:", "wss:", "http:", "https", or "ws+unix:"`:a&&!s.pathname?l="The URL's pathname is empty":s.hash&&(l="The URL contains a fragment identifier"),l){let g=new SyntaxError(l);if(t._redirects===0)throw g;Rt(t,g);return}let c=o?443:80,f=Hl(16).toString("base64"),u=o?jl.request:Wl.request,h=new Set,v;if(i.createConnection=o?af:of,i.defaultPort=i.defaultPort||c,i.port=s.port||c,i.host=s.hostname.startsWith("[")?s.hostname.slice(1,-1):s.hostname,i.headers={...i.headers,"Sec-WebSocket-Version":i.protocolVersion,"Sec-WebSocket-Key":f,Connection:"Upgrade",Upgrade:"websocket"},i.path=s.pathname+s.search,i.timeout=i.handshakeTimeout,i.perMessageDeflate&&(v=new re(i.perMessageDeflate!==!0?i.perMessageDeflate:{},!1,i.maxPayload),i.headers["Sec-WebSocket-Extensions"]=ef({[re.extensionName]:v.offer()})),r.length){for(let g of r){if(typeof g!="string"||!sf.test(g)||h.has(g))throw new SyntaxError("An invalid or duplicated subprotocol was specified");h.add(g)}i.headers["Sec-WebSocket-Protocol"]=r.join(",")}if(i.origin&&(i.protocolVersion<13?i.headers["Sec-WebSocket-Origin"]=i.origin:i.headers.Origin=i.origin),(s.username||s.password)&&(i.auth=`${s.username}:${s.password}`),a){let g=i.path.split(":");i.socketPath=g[0],i.path=g[1]}let _;if(i.followRedirects){if(t._redirects===0){t._originalIpc=a,t._originalSecure=o,t._originalHostOrSocketPath=a?i.socketPath:s.host;let g=n&&n.headers;if(n={...n,headers:{}},g)for(let[O,fe]of Object.entries(g))n.headers[O.toLowerCase()]=fe}else if(t.listenerCount("redirect")===0){let g=a?t._originalIpc?i.socketPath===t._originalHostOrSocketPath:!1:t._originalIpc?!1:s.host===t._originalHostOrSocketPath;(!g||t._originalSecure&&!o)&&(delete i.headers.authorization,delete i.headers.cookie,g||delete i.headers.host,i.auth=void 0)}i.auth&&!n.headers.authorization&&(n.headers.authorization="Basic "+Buffer.from(i.auth).toString("base64")),_=t._req=u(i),t._redirects&&t.emit("redirect",t.url,_)}else _=t._req=u(i);i.timeout&&_.on("timeout",()=>{R(t,_,"Opening handshake has timed out")}),_.on("error",g=>{_===null||_[No]||(_=t._req=null,Rt(t,g))}),_.on("response",g=>{let O=g.headers.location,fe=g.statusCode;if(O&&i.followRedirects&&fe>=300&&fe<400){if(++t._redirects>i.maxRedirects){R(t,_,"Maximum redirects exceeded");return}_.abort();let Xe;try{Xe=new Ur(O,e)}catch{let ne=new SyntaxError(`Invalid URL: ${O}`);Rt(t,ne);return}ko(t,Xe,r,n)}else t.emit("unexpected-response",_,g)||R(t,_,`Unexpected server response: ${g.statusCode}`)}),_.on("upgrade",(g,O,fe)=>{if(t.emit("upgrade",g),t.readyState!==b.CONNECTING)return;if(_=t._req=null,g.headers.upgrade.toLowerCase()!=="websocket"){R(t,O,"Invalid Upgrade header");return}let Xe=Yl("sha1").update(f+zl).digest("base64");if(g.headers["sec-websocket-accept"]!==Xe){R(t,O,"Invalid Sec-WebSocket-Accept header");return}let Oe=g.headers["sec-websocket-protocol"],ne;if(Oe!==void 0?h.size?h.has(Oe)||(ne="Server sent an invalid subprotocol"):ne="Server sent a subprotocol but none was requested":h.size&&(ne="Server sent no subprotocol"),ne){R(t,O,ne);return}Oe&&(t._protocol=Oe);let Wr=g.headers["sec-websocket-extensions"];if(Wr!==void 0){if(!v){R(t,O,"Server sent a Sec-WebSocket-Extensions header but no extension was requested");return}let Ft;try{Ft=tf(Wr)}catch{R(t,O,"Invalid Sec-WebSocket-Extensions header");return}let Gr=Object.keys(Ft);if(Gr.length!==1||Gr[0]!==re.extensionName){R(t,O,"Server indicated an extension that was not requested");return}try{v.accept(Ft[re.extensionName])}catch{R(t,O,"Invalid Sec-WebSocket-Extensions header");return}t._extensions[re.extensionName]=v}t.setSocket(O,fe,{allowSynchronousEvents:i.allowSynchronousEvents,generateMask:i.generateMask,maxPayload:i.maxPayload,skipUTF8Validation:i.skipUTF8Validation})}),i.finishRequest?i.finishRequest(_,t):_.end()}function Rt(t,e){t._readyState=b.CLOSING,t.emit("error",e),t.emitClose()}function of(t){return t.path=t.socketPath,Ro.connect(t)}function af(t){return t.path=void 0,!t.servername&&t.servername!==""&&(t.servername=Ro.isIP(t.host)?"":t.host),Gl.connect(t)}function R(t,e,r){t._readyState=b.CLOSING;let n=new Error(r);Error.captureStackTrace(n,R),e.setHeader?(e[No]=!0,e.abort(),e.socket&&!e.socket.destroyed&&e.socket.destroy(),process.nextTick(Rt,t,n)):(e.destroy(n),e.once("error",t.emit.bind(t,"error")),e.once("close",t.emitClose.bind(t)))}function Fr(t,e,r){if(e){let n=rf(e).length;t._socket?t._sender._bufferedBytes+=n:t._bufferedAmount+=n}if(r){let n=new Error(`WebSocket is not open: readyState ${t.readyState} (${z[t.readyState]})`);process.nextTick(r,n)}}function cf(t,e){let r=this[C];r._closeFrameReceived=!0,r._closeMessage=e,r._closeCode=t,r._socket[C]!==void 0&&(r._socket.removeListener("data",Lt),process.nextTick(Uo,r._socket),t===1005?r.close():r.close(t,e))}function uf(){let t=this[C];t.isPaused||t._socket.resume()}function lf(t){let e=this[C];e._socket[C]!==void 0&&(e._socket.removeListener("data",Lt),process.nextTick(Uo,e._socket),e.close(t[Ql])),e.emit("error",t)}function Io(){this[C].emitClose()}function ff(t,e){this[C].emit("message",t,e)}function df(t){let e=this[C];e._autoPong&&e.pong(t,!this._isServer,Lo),e.emit("ping",t)}function hf(t){this[C].emit("pong",t)}function Uo(t){t.resume()}function Bo(){let t=this[C];this.removeListener("close",Bo),this.removeListener("data",Lt),this.removeListener("end",Do),t._readyState=b.CLOSING;let e;!this._readableState.endEmitted&&!t._closeFrameReceived&&!t._receiver._writableState.errorEmitted&&(e=t._socket.read())!==null&&t._receiver.write(e),t._receiver.end(),this[C]=void 0,clearTimeout(t._closeTimer),t._receiver._writableState.finished||t._receiver._writableState.errorEmitted?t.emitClose():(t._receiver.on("error",Io),t._receiver.on("finish",Io))}function Lt(t){this[C]._receiver.write(t)||this.pause()}function Do(){let t=this[C];t._readyState=b.CLOSING,t._receiver.end(),this.end()}function Fo(){let t=this[C];this.removeListener("error",Fo),this.on("error",Lo),t&&(t._readyState=b.CLOSING,this.destroy())}});var $o=d((th,Mo)=>{"use strict";var{tokenChars:pf}=qe();function yf(t){let e=new Set,r=-1,n=-1,i=0;for(i;i<t.length;i++){let o=t.charCodeAt(i);if(n===-1&&pf[o]===1)r===-1&&(r=i);else if(i!==0&&(o===32||o===9))n===-1&&r!==-1&&(n=i);else if(o===44){if(r===-1)throw new SyntaxError(`Unexpected character at index ${i}`);n===-1&&(n=i);let a=t.slice(r,n);if(e.has(a))throw new SyntaxError(`The "${a}" subprotocol is duplicated`);e.add(a),r=n=-1}else throw new SyntaxError(`Unexpected character at index ${i}`)}if(r===-1||n!==-1)throw new SyntaxError("Unexpected end of input");let s=t.slice(r,i);if(e.has(s))throw new SyntaxError(`The "${s}" subprotocol is duplicated`);return e.add(s),e}Mo.exports={parse:yf}});var Xo=d((nh,Vo)=>{"use strict";var gf=require("events"),Nt=require("http"),{Duplex:rh}=require("stream"),{createHash:vf}=require("crypto"),jo=kr(),ce=Fe(),mf=$o(),_f=qr(),{GUID:Sf,kWebSocket:Ef}=ee(),xf=/^[+/0-9A-Za-z]{22}==$/,Wo=0,Go=1,Yo=2,Mr=class extends gf{constructor(e,r){if(super(),e={allowSynchronousEvents:!1,autoPong:!0,maxPayload:100*1024*1024,skipUTF8Validation:!1,perMessageDeflate:!1,handleProtocols:null,clientTracking:!0,verifyClient:null,noServer:!1,backlog:null,server:null,host:null,path:null,port:null,WebSocket:_f,...e},e.port==null&&!e.server&&!e.noServer||e.port!=null&&(e.server||e.noServer)||e.server&&e.noServer)throw new TypeError('One and only one of the "port", "server", or "noServer" options must be specified');if(e.port!=null?(this._server=Nt.createServer((n,i)=>{let s=Nt.STATUS_CODES[426];i.writeHead(426,{"Content-Length":s.length,"Content-Type":"text/plain"}),i.end(s)}),this._server.listen(e.port,e.host,e.backlog,r)):e.server&&(this._server=e.server),this._server){let n=this.emit.bind(this,"connection");this._removeListeners=bf(this._server,{listening:this.emit.bind(this,"listening"),error:this.emit.bind(this,"error"),upgrade:(i,s,o)=>{this.handleUpgrade(i,s,o,n)}})}e.perMessageDeflate===!0&&(e.perMessageDeflate={}),e.clientTracking&&(this.clients=new Set,this._shouldEmitClose=!1),this.options=e,this._state=Wo}address(){if(this.options.noServer)throw new Error('The server is operating in "noServer" mode');return this._server?this._server.address():null}close(e){if(this._state===Yo){e&&this.once("close",()=>{e(new Error("The server is not running"))}),process.nextTick(We,this);return}if(e&&this.once("close",e),this._state!==Go)if(this._state=Go,this.options.noServer||this.options.server)this._server&&(this._removeListeners(),this._removeListeners=this._server=null),this.clients?this.clients.size?this._shouldEmitClose=!0:process.nextTick(We,this):process.nextTick(We,this);else{let r=this._server;this._removeListeners(),this._removeListeners=this._server=null,r.close(()=>{We(this)})}}shouldHandle(e){if(this.options.path){let r=e.url.indexOf("?");if((r!==-1?e.url.slice(0,r):e.url)!==this.options.path)return!1}return!0}handleUpgrade(e,r,n,i){r.on("error",Ho);let s=e.headers["sec-websocket-key"],o=+e.headers["sec-websocket-version"];if(e.method!=="GET"){ue(this,e,r,405,"Invalid HTTP method");return}if(e.headers.upgrade.toLowerCase()!=="websocket"){ue(this,e,r,400,"Invalid Upgrade header");return}if(!s||!xf.test(s)){ue(this,e,r,400,"Missing or invalid Sec-WebSocket-Key header");return}if(o!==8&&o!==13){ue(this,e,r,400,"Missing or invalid Sec-WebSocket-Version header");return}if(!this.shouldHandle(e)){Ge(r,400);return}let a=e.headers["sec-websocket-protocol"],l=new Set;if(a!==void 0)try{l=mf.parse(a)}catch{ue(this,e,r,400,"Invalid Sec-WebSocket-Protocol header");return}let c=e.headers["sec-websocket-extensions"],f={};if(this.options.perMessageDeflate&&c!==void 0){let u=new ce(this.options.perMessageDeflate,!0,this.options.maxPayload);try{let h=jo.parse(c);h[ce.extensionName]&&(u.accept(h[ce.extensionName]),f[ce.extensionName]=u)}catch{ue(this,e,r,400,"Invalid or unacceptable Sec-WebSocket-Extensions header");return}}if(this.options.verifyClient){let u={origin:e.headers[`${o===8?"sec-websocket-origin":"origin"}`],secure:!!(e.socket.authorized||e.socket.encrypted),req:e};if(this.options.verifyClient.length===2){this.options.verifyClient(u,(h,v,_,g)=>{if(!h)return Ge(r,v||401,_,g);this.completeUpgrade(f,s,l,e,r,n,i)});return}if(!this.options.verifyClient(u))return Ge(r,401)}this.completeUpgrade(f,s,l,e,r,n,i)}completeUpgrade(e,r,n,i,s,o,a){if(!s.readable||!s.writable)return s.destroy();if(s[Ef])throw new Error("server.handleUpgrade() was called more than once with the same socket, possibly due to a misconfiguration");if(this._state>Wo)return Ge(s,503);let c=["HTTP/1.1 101 Switching Protocols","Upgrade: websocket","Connection: Upgrade",`Sec-WebSocket-Accept: ${vf("sha1").update(r+Sf).digest("base64")}`],f=new this.options.WebSocket(null,void 0,this.options);if(n.size){let u=this.options.handleProtocols?this.options.handleProtocols(n,i):n.values().next().value;u&&(c.push(`Sec-WebSocket-Protocol: ${u}`),f._protocol=u)}if(e[ce.extensionName]){let u=e[ce.extensionName].params,h=jo.format({[ce.extensionName]:[u]});c.push(`Sec-WebSocket-Extensions: ${h}`),f._extensions=e}this.emit("headers",c,i),s.write(c.concat(`\r
`).join(`\r
`)),s.removeListener("error",Ho),f.setSocket(s,o,{allowSynchronousEvents:this.options.allowSynchronousEvents,maxPayload:this.options.maxPayload,skipUTF8Validation:this.options.skipUTF8Validation}),this.clients&&(this.clients.add(f),f.on("close",()=>{this.clients.delete(f),this._shouldEmitClose&&!this.clients.size&&process.nextTick(We,this)})),a(f,i)}};Vo.exports=Mr;function bf(t,e){for(let r of Object.keys(e))t.on(r,e[r]);return function(){for(let n of Object.keys(e))t.removeListener(n,e[n])}}function We(t){t._state=Yo,t.emit("close")}function Ho(){this.destroy()}function Ge(t,e,r,n){r=r||Nt.STATUS_CODES[e],n={Connection:"close","Content-Type":"text/html","Content-Length":Buffer.byteLength(r),...n},t.once("finish",t.destroy),t.end(`HTTP/1.1 ${e} ${Nt.STATUS_CODES[e]}\r
`+Object.keys(n).map(i=>`${i}: ${n[i]}`).join(`\r
`)+`\r
\r
`+r)}function ue(t,e,r,n,i){if(t.listenerCount("wsClientError")){let s=new Error(i);Error.captureStackTrace(s,ue),t.emit("wsClientError",s,r,e)}else Ge(r,n,i)}});var kf={};ma(kf,{activate:()=>Lf,deactivate:()=>Nf});module.exports=_a(kf);var we=P(require("vscode"));var Ye=P(require("vscode")),ra=P(zr()),na=P(_r());var wf=P(Ks(),1),Of=P(Ir(),1),Af=P(Lr(),1),zo=P(qr(),1),$r=P(Xo(),1);var Ko=zo.default;var Qo=P(require("vscode")),jr=t=>{Qo.window.showInformationMessage(t)};var Zo=P(require("vscode")),le=(t,e)=>{Zo.commands.executeCommand("setContext",t,e)};var He=class t{static _instance;_sessionId=null;constructor(){}static get instance(){return this._instance||(this._instance=new t),this._instance}get sessionId(){return this._sessionId}set sessionId(e){this._sessionId=e}};var Jo=P(require("child_process")),ea=()=>{let t,r=Jo.spawnSync("git",["config","--global","user.name"]).stdout.toString().trim();return r?t=r:t="Guest",t};var ia=(0,na.default)(),Tf="FAST_SHARE",ta=null,Pf=async()=>{ta=new $r.default({port:4e3}),ta.on("connection",t=>{jr("Nuevo cliente conectado"),t.on("message",async e=>{if(e.toString()==="REQUEST"){let r=He.instance.sessionId;t.send(r||"ERROR")}})})},Cf=async()=>{let t,e=ra.getApi().then(i=>i?.session.id),r=Ye.env.clipboard.readText(),n=await Promise.race([e,r]);return n?n.startsWith("https")?t=n:t=`https://prod.liveshare.vsengsaas.visualstudio.com/join?${n}`:t=null,t},sa=async()=>{le("openConnectionStatus","loading"),await Ye.commands.executeCommand("liveshare.end"),le("openConnectionStatus","true"),ia.unpublishAll(),console.log("UNPUBLISH ADVICE")},oa=async()=>{le("openConnectionStatus","loading"),jr("Iniciando LiveShare"),await Ye.commands.executeCommand("liveshare.start"),He.instance.sessionId=await Cf(),Pf(),ia.publish({name:"fastshare",type:Tf,port:4e3,txt:{nickname:ea()}}),le("openConnectionStatus","false")};var kt=P(require("vscode"));var aa,ca=!0,K=null,If=async t=>{let e=`vscode://ms-vsliveshare.vsliveshare/join?vslsLink=${t}`,r=kt.Uri.parse(e);await kt.env.openExternal(r)},ua=async t=>{let e=`ws://${t}:4000`;K&&(K.close(),K=null),K=new Ko(e),K.on("open",()=>{K?.send("REQUEST")}),K.on("message",r=>{If(r.toString()),aa&&ca&&(aa.command=void 0,ca=!1)}),K.on("close",()=>{K=null})};var la=P(require("vscode")),fa=P(_r());var Bt=P(require("vscode")),Ut=class{constructor(e){this.users=e}iconPath=new Bt.ThemeIcon("account");getTreeItem(e){let r=new Bt.TreeItem(e.nickname);return r.iconPath=this.iconPath,r.description="Active",r.command={command:"fastshare.openConnection",title:"Open User Session",arguments:[e.ipAddress]},r}getChildren(){return Promise.resolve(this.users)}};var Ve=new Set,Dt=()=>{la.window.createTreeView("treeUsers",{treeDataProvider:new Ut([...Ve])})},Rf=()=>{let t=(0,fa.default)().find({type:"FAST_SHARE"});t.on("down",e=>{if(e.type==="FAST_SHARE"){console.log("SE ENCONTRO UN CIERRE SE SESION: ",e.addresses);let r;/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/.test(e.addresses[0])?r=e.addresses[0]:r=e.addresses[1];let i=Array.from(Ve).find(s=>s.ipAddress===r);i&&(Ve.delete(i),Dt())}}),t.on("up",e=>{if(e.type==="FAST_SHARE"){let r;/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/.test(e.addresses[0])?r=e.addresses[0]:r=e.addresses[1];let i=e.txt.nickname;Ve.has({ipAddress:r,nickname:i})||(Ve.add({ipAddress:r,nickname:i}),Dt())}})};Rf();le("openConnectionStatus","true");function Lf(t){let e=we.commands.registerCommand("fastshare.openServer",async()=>{oa()}),r=we.commands.registerCommand("fastshare.closeServer",async()=>{sa()}),n=we.commands.registerCommand("fastshare.openConnection",s=>{ua(s)}),i=we.commands.registerCommand("fastshare.showUserList",()=>{Dt()});t.subscriptions.push(e),t.subscriptions.push(r),t.subscriptions.push(n),t.subscriptions.push(i),we.commands.executeCommand("fastshare.showUserList")}function Nf(){}0&&(module.exports={activate,deactivate});
